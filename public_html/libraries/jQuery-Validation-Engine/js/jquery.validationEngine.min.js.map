{"version":3,"file":"jquery.validationEngine.min.js","sources":["jquery.validationEngine.js"],"sourcesContent":["/*\r\n * Inline Form Validation Engine 3.1.1 v2, jQuery plugin\r\n *\r\n * Copyright(c) 2010, Cedric Dugas\r\n * http://www.position-absolute.com\r\n *\r\n * 2.0 Rewrite by Olivier Refalo\r\n * http://www.crionics.com\r\n *\r\n * Form validation engine allowing custom regex rules to be added.\r\n * Licensed under the MIT License\r\n */\r\n (function($) {\r\n\r\n\t\"use strict\";\r\n\r\n\tvar methods = {\r\n\r\n\t\t/**\r\n\t\t * Kind of the constructor, called before any action\r\n\t\t * @param options\r\n\t\t */\r\n\t\tinit: function(options) {\r\n\t\t\tvar form = this;\r\n\t\t\tif (!form.data('jqv') || form.data('jqv') == null ) {\r\n\t\t\t\toptions = methods._saveOptions(form, options);\r\n\t\t\t\t// bind all formError elements to close on click\r\n\t\t\t\t$(document).on(\"click\", \".formError\", function() {\r\n\t\t\t\t\t$(this).fadeOut(150, function() {\r\n\t\t\t\t\t\t// remove prompt once invisible\r\n\t\t\t\t\t\t$(this).closest('.formError').remove();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t },\r\n\t\t/**\r\n\t\t* Attachs jQuery.validationEngine to form.submit and field.blur events\r\n\t\t* Takes an optional params: a list of options\r\n\t\t* ie. jQuery(\"#formID1\").validationEngine('attach', {promptPosition : \"centerRight\"});\r\n\t\t*/\r\n\t\tattach: function(userOptions) {\r\n\r\n\t\t\tvar form = this;\r\n\t\t\tvar options;\r\n\r\n\t\t\tif(userOptions)\r\n\t\t\t\toptions = methods._saveOptions(form, userOptions);\r\n\t\t\telse\r\n\t\t\t\toptions = form.data('jqv');\r\n\r\n\t\t\toptions.validateAttribute = (form.find(\"[data-validation-engine*=validate]\").length) ? \"data-validation-engine\" : \"class\";\r\n\t\t\tif (options.binded) {\r\n\r\n\t\t\t\t// delegate fields\r\n\t\t\t\tform.on(options.validationEventTrigger, \"[\"+options.validateAttribute+\"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)\", methods._onFieldEvent);\r\n\t\t\t\tform.on(\"click\", \"[\"+options.validateAttribute+\"*=validate][type=checkbox],[\"+options.validateAttribute+\"*=validate][type=radio]\", methods._onFieldEvent);\r\n\t\t\t\tform.on(options.validationEventTrigger,\"[\"+options.validateAttribute+\"*=validate][class*=datepicker]\", {\"delay\": 300}, methods._onFieldEvent);\r\n\t\t\t}\r\n\t\t\tif (options.autoPositionUpdate) {\r\n\t\t\t\t$(window).bind(\"resize\", {\r\n\t\t\t\t\t\"noAnimation\": true,\r\n\t\t\t\t\t\"formElem\": form\r\n\t\t\t\t}, methods.updatePromptsPosition);\r\n\t\t\t}\r\n\t\t\tform.on(\"click\",\"a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']\", methods._submitButtonClick);\r\n\t\t\tform.removeData('jqv_submitButton');\r\n\r\n\t\t\t// bind form.submit\r\n\t\t\tform.on(\"submit\", methods._onSubmitEvent);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t/**\r\n\t\t* Unregisters any bindings that may point to jQuery.validaitonEngine\r\n\t\t*/\r\n\t\tdetach: function() {\r\n\r\n\t\t\tvar form = this;\r\n\t\t\tvar options = form.data('jqv');\r\n\r\n\t\t\t// unbind fields\r\n\t\t\tform.off(options.validationEventTrigger, \"[\"+options.validateAttribute+\"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)\", methods._onFieldEvent);\r\n\t\t\tform.off(\"click\", \"[\"+options.validateAttribute+\"*=validate][type=checkbox],[\"+options.validateAttribute+\"*=validate][type=radio]\", methods._onFieldEvent);\r\n\t\t\tform.off(options.validationEventTrigger,\"[\"+options.validateAttribute+\"*=validate][class*=datepicker]\", methods._onFieldEvent);\r\n\r\n\t\t\t// unbind form.submit\r\n\t\t\tform.off(\"submit\", methods._onSubmitEvent);\r\n\t\t\tform.removeData('jqv');\r\n\r\n\t\t\tform.off(\"click\", \"a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']\", methods._submitButtonClick);\r\n\t\t\tform.removeData('jqv_submitButton');\r\n\r\n\t\t\tif (options.autoPositionUpdate)\r\n\t\t\t\t$(window).off(\"resize\", methods.updatePromptsPosition);\r\n\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t/**\r\n\t\t* Validates either a form or a list of fields, shows prompts accordingly.\r\n\t\t* Note: There is no ajax form validation with this method, only field ajax validation are evaluated\r\n\t\t*\r\n\t\t* @return true if the form validates, false if it fails\r\n\t\t*/\r\n\t\tvalidate: function(userOptions) {\r\n\t\t\tvar element = $(this);\r\n\t\t\tvar valid = null;\r\n\t\t\tvar options;\r\n\r\n\t\t\tif (element.is(\"form\") || element.hasClass(\"validationEngineContainer\")) {\r\n\t\t\t\tif (element.hasClass('validating')) {\r\n\t\t\t\t\t// form is already validating.\r\n\t\t\t\t\t// Should abort old validation and start new one. I don't know how to implement it.\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.addClass('validating');\r\n\t\t\t\t\tif(userOptions)\r\n\t\t\t\t\t\toptions = methods._saveOptions(element, userOptions);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\toptions = element.data('jqv');\r\n\t\t\t\t\tvar valid = methods._validateFields(this);\r\n\r\n\t\t\t\t\t// If the form doesn't validate, clear the 'validating' class before the user has a chance to submit again\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\telement.removeClass('validating');\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t\tif (valid && options.onSuccess) {\r\n\t\t\t\t\t\toptions.onSuccess();\r\n\t\t\t\t\t} else if (!valid && options.onFailure) {\r\n\t\t\t\t\t\toptions.onFailure();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (element.is('form') || element.hasClass('validationEngineContainer')) {\r\n\t\t\t\telement.removeClass('validating');\r\n\t\t\t} else {\r\n\t\t\t\t// field validation\r\n\t\t                var form = element.closest('form, .validationEngineContainer');\r\n\t\t                options = (form.data('jqv')) ? form.data('jqv') : $.validationEngine.defaults;\r\n\t\t                valid = methods._validateField(element, options);\r\n\r\n\t\t                if (valid && options.onFieldSuccess)\r\n\t\t                    options.onFieldSuccess();\r\n\t\t                else if (options.onFieldFailure && options.InvalidFields.length > 0) {\r\n\t\t                    options.onFieldFailure();\r\n\t\t                }\r\n\t\t\t}\r\n\t\t\tif(options.onValidationComplete) {\r\n\t\t\t\t// !! ensures that an undefined return is interpreted as return false but allows a onValidationComplete() to possibly return true and have form continue processing\r\n\t\t\t\treturn !!options.onValidationComplete(form, valid);\r\n\t\t\t}\r\n\t\t\treturn valid;\r\n\t\t},\r\n\t\t/**\r\n\t\t*  Redraw prompts position, useful when you change the DOM state when validating\r\n\t\t*/\r\n\t\tupdatePromptsPosition: function(event) {\r\n\r\n\t\t\tif (event && this == window) {\r\n\t\t\t\tvar form = event.data.formElem;\r\n\t\t\t\tvar noAnimation = event.data.noAnimation;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tvar form = $(this.closest('form, .validationEngineContainer'));\r\n\r\n\t\t\tvar options = form.data('jqv');\r\n\t\t\t// No option, take default one\r\n\t\t\tif (!options)\r\n\t\t\t\toptions = methods._saveOptions(form, options);\r\n\t\t\tform.find('['+options.validateAttribute+'*=validate]').not(\":disabled\").each(function(){\r\n\t\t\t\tvar field = $(this);\r\n\t\t\t\tif (options.prettySelect && field.is(\":hidden\"))\r\n\t\t\t\t  field = form.find(\"#\" + options.usePrefix + field.attr('id') + options.useSuffix);\r\n\t\t\t\tvar prompt = methods._getPrompt(field);\r\n\t\t\t\tvar promptText = $(prompt).find(\".formErrorContent\").html();\r\n\r\n\t\t\t\tif(prompt)\r\n\t\t\t\t\tmethods._updatePrompt(field, $(prompt), promptText, undefined, false, options, noAnimation);\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t/**\r\n\t\t* Displays a prompt on a element.\r\n\t\t* Note that the element needs an id!\r\n\t\t*\r\n\t\t* @param {String} promptText html text to display type\r\n\t\t* @param {String} type the type of bubble: 'pass' (green), 'load' (black) anything else (red)\r\n\t\t* @param {String} possible values topLeft, topRight, bottomLeft, centerRight, bottomRight\r\n\t\t*/\r\n\t\tshowPrompt: function(promptText, type, promptPosition, showArrow) {\r\n\t\t\tvar form = this.closest('form, .validationEngineContainer');\r\n\t\t\tvar options = form.data('jqv');\r\n\t\t\t// No option, take default one\r\n\t\t\tif(!options)\r\n\t\t\t\toptions = methods._saveOptions(this, options);\r\n\t\t\tif(promptPosition)\r\n\t\t\t\toptions.promptPosition=promptPosition;\r\n\t\t\toptions.showArrow = showArrow==true;\r\n\r\n\t\t\tmethods._showPrompt(this, promptText, type, false, options);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t/**\r\n\t\t* Closes form error prompts, CAN be invidual\r\n\t\t* Fixed issue (hide) hiding all error prompts?!\r\n\t\t* (https://github.com/posabsolute/jQuery-Validation-Engine/issues/966)\r\n\t\t*/\r\n\t\thide: function() {\r\n\t\t\t var form = $(this).closest('form, .validationEngineContainer');\r\n\t\t\t var field = $(this).attr(\"id\");\r\n\t\t\t var options = form.data('jqv');\r\n\t\t\t // No option, take default one\r\n\t\t\t if (!options)\r\n\t\t\t\toptions = methods._saveOptions(form, options);\r\n\t\t\t var fadeDuration = (options && options.fadeDuration) ? options.fadeDuration : 0.3;\r\n\t\t\t var closingtag;\r\n\r\n\t\t\t if(form.is(\"form\") || form.hasClass(\"validationEngineContainer\")) {\r\n\t\t\t\t closingtag = methods._getClassName(field) +\"formError\";\r\n\t\t\t } else {\r\n\t\t\t\t closingtag = \"parentForm\"+methods._getClassName(field);\r\n\t\t\t }\r\n\t\t\t $('.'+closingtag).fadeTo(fadeDuration, 0, function() {\r\n\t\t\t\t $('.'+closingtag).remove();\r\n\t\t\t });\r\n\t\t\t return this;\r\n\t\t },\r\n\t\t /**\r\n\t\t * Closes all error prompts on the page\r\n\t\t */\r\n\t\t hideAll: function() {\r\n\t\t\t var form = this;\r\n\t\t\t var options = form.data('jqv');\r\n\t\t\t var duration = options ? options.fadeDuration:300;\r\n\t\t\t $('.formError').fadeTo(duration, 0, function() {\r\n\t\t\t\t $(this).closest('.formError').remove();\r\n\t\t\t });\r\n\t\t\t return this;\r\n\t\t },\r\n\t\t/**\r\n\t\t* Typically called when user exists a field using tab or a mouse click, triggers a field\r\n\t\t* validation\r\n\t\t*/\r\n\t\t_onFieldEvent: function(event) {\r\n\t\t\tvar field = $(this);\r\n\t\t\tvar form = field.closest('form, .validationEngineContainer');\r\n\t\t\tvar options = form.data('jqv');\r\n\t\t\t// No option, take default one\r\n\t\t\tif (!options)\r\n\t\t\t\toptions = methods._saveOptions(form, options);\r\n\t\t\toptions.eventTrigger = \"field\";\r\n\r\n            if (options.notEmpty == true){\r\n\r\n                if(field.val().length > 0){\r\n                    // validate the current field\r\n                    window.setTimeout(function() {\r\n                        methods._validateField(field, options);\r\n                    }, (event.data) ? event.data.delay : 0);\r\n\r\n                }\r\n\r\n            }else{\r\n\r\n                // validate the current field\r\n                window.setTimeout(function() {\r\n                    methods._validateField(field, options);\r\n                }, (event.data) ? event.data.delay : 0);\r\n\r\n            }\r\n\r\n\r\n\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t* Called when the form is submited, shows prompts accordingly\r\n\t\t*\r\n\t\t* @param {jqObject}\r\n\t\t*            form\r\n\t\t* @return false if form submission needs to be cancelled\r\n\t\t*/\r\n\t\t_onSubmitEvent: function() {\r\n\t\t\tvar form = $(this);\r\n\t\t\tvar options = form.data('jqv');\r\n\r\n\t\t\t//check if it is trigger from skipped button\r\n\t\t\tif (form.data(\"jqv_submitButton\")){\r\n\t\t\t\tvar submitButton = $(\"#\" + form.data(\"jqv_submitButton\"));\r\n\t\t\t\tif (submitButton){\r\n\t\t\t\t\tif (submitButton.length > 0){\r\n\t\t\t\t\t\tif (submitButton.hasClass(\"validate-skip\") || submitButton.attr(\"data-validation-engine-skip\") == \"true\")\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\toptions.eventTrigger = \"submit\";\r\n\r\n\t\t\t// validate each field\r\n\t\t\t// (- skip field ajax validation, not necessary IF we will perform an ajax form validation)\r\n\t\t\tvar r=methods._validateFields(form);\r\n\r\n\t\t\tif (r && options.ajaxFormValidation) {\r\n\t\t\t\tmethods._validateFormWithAjax(form, options);\r\n\t\t\t\t// cancel form auto-submission - process with async call onAjaxFormComplete\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif(options.onValidationComplete) {\r\n\t\t\t\t// !! ensures that an undefined return is interpreted as return false but allows a onValidationComplete() to possibly return true and have form continue processing\r\n\t\t\t\treturn !!options.onValidationComplete(form, r);\r\n\t\t\t}\r\n\t\t\treturn r;\r\n\t\t},\r\n\t\t/**\r\n\t\t* Return true if the ajax field validations passed so far\r\n\t\t* @param {Object} options\r\n\t\t* @return true, is all ajax validation passed so far (remember ajax is async)\r\n\t\t*/\r\n\t\t_checkAjaxStatus: function(options) {\r\n\t\t\tvar status = true;\r\n\t\t\t$.each(options.ajaxValidCache, function(key, value) {\r\n\t\t\t\tif (!value) {\r\n\t\t\t\t\tstatus = false;\r\n\t\t\t\t\t// break the each\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn status;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Return true if the ajax field is validated\r\n\t\t* @param {String} fieldid\r\n\t\t* @param {Object} options\r\n\t\t* @return true, if validation passed, false if false or doesn't exist\r\n\t\t*/\r\n\t\t_checkAjaxFieldStatus: function(fieldid, options) {\r\n\t\t\treturn options.ajaxValidCache[fieldid] == true;\r\n\t\t},\r\n\t\t/**\r\n\t\t* Validates form fields, shows prompts accordingly\r\n\t\t*\r\n\t\t* @param {jqObject}\r\n\t\t*            form\r\n\t\t* @param {skipAjaxFieldValidation}\r\n\t\t*            boolean - when set to true, ajax field validation is skipped, typically used when the submit button is clicked\r\n\t\t*\r\n\t\t* @return true if form is valid, false if not, undefined if ajax form validation is done\r\n\t\t*/\r\n\t\t_validateFields: function(form) {\r\n\t\t\tvar options = form.data('jqv');\r\n\r\n\t\t\t// this variable is set to true if an error is found\r\n\t\t\tvar errorFound = false;\r\n\r\n\t\t\t// Trigger hook, start validation\r\n\t\t\tform.trigger(\"jqv.form.validating\");\r\n\t\t\t// first, evaluate status of non ajax fields\r\n\t\t\tvar first_err=null;\r\n\t\t\tform.find('['+options.validateAttribute+'*=validate]').not(\":disabled\").each( function() {\r\n\t\t\t\tvar field = $(this);\r\n\t\t\t\tvar names = [];\r\n\t\t\t\tif ($.inArray(field.attr('name'), names) < 0) {\r\n\t\t\t\t\terrorFound |= methods._validateField(field, options);\r\n\t\t\t\t\tif (errorFound && first_err==null)\r\n\t\t\t\t\t\tif (field.is(\":hidden\") && options.prettySelect)\r\n\t\t\t\t\t\t\tfirst_err = field = form.find(\"#\" + options.usePrefix + methods._jqSelector(field.attr('id')) + options.useSuffix);\r\n\t\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t\t//Check if we need to adjust what element to show the prompt on\r\n\t\t\t\t\t\t\t//and and such scroll to instead\r\n\t\t\t\t\t\t\tif(field.data('jqv-prompt-at') instanceof jQuery ){\r\n\t\t\t\t\t\t\t\tfield = field.data('jqv-prompt-at');\r\n\t\t\t\t\t\t\t} else if(field.data('jqv-prompt-at')) {\r\n\t\t\t\t\t\t\t\tfield = $(field.data('jqv-prompt-at'));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfirst_err=field;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tif (options.doNotShowAllErrosOnSubmit)\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\tnames.push(field.attr('name'));\r\n\r\n\t\t\t\t\t//if option set, stop checking validation rules after one error is found\r\n\t\t\t\t\tif(options.showOneMessage == true && errorFound){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// second, check to see if all ajax calls completed ok\r\n\t\t\t// errorFound |= !methods._checkAjaxStatus(options);\r\n\r\n\t\t\t// third, check status and scroll the container accordingly\r\n\t\t\tform.trigger(\"jqv.form.result\", [errorFound]);\r\n\r\n\t\t\tif (errorFound) {\r\n\t\t\t\tif (options.scroll) {\r\n\t\t\t\t\tvar destination=first_err.offset().top;\r\n\t\t\t\t\tvar fixleft = first_err.offset().left;\r\n\r\n\t\t\t\t\t//prompt positioning adjustment support. Usage: positionType:Xshift,Yshift (for ex.: bottomLeft:+20 or bottomLeft:-20,+10)\r\n\t\t\t\t\tvar positionType=options.promptPosition;\r\n\t\t\t\t\tif (typeof(positionType)=='string' && positionType.indexOf(\":\")!=-1)\r\n\t\t\t\t\t\tpositionType=positionType.substring(0,positionType.indexOf(\":\"));\r\n\r\n\t\t\t\t\tif (positionType!=\"bottomRight\" && positionType!=\"bottomLeft\") {\r\n\t\t\t\t\t\tvar prompt_err= methods._getPrompt(first_err);\r\n\t\t\t\t\t\tif (prompt_err) {\r\n\t\t\t\t\t\t\tdestination=prompt_err.offset().top;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Offset the amount the page scrolls by an amount in px to accomodate fixed elements at top of page\r\n\t\t\t\t\tif (options.scrollOffset) {\r\n\t\t\t\t\t\tdestination -= options.scrollOffset;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// get the position of the first error, there should be at least one, no need to check this\r\n\t\t\t\t\t//var destination = form.find(\".formError:not('.greenPopup'):first\").offset().top;\r\n\t\t\t\t\tif (options.isOverflown) {\r\n\t\t\t\t\t\tvar overflowDIV = $(options.overflownDIV);\r\n\t\t\t\t\t\tif(!overflowDIV.length) return false;\r\n\t\t\t\t\t\tvar scrollContainerScroll = overflowDIV.scrollTop();\r\n\t\t\t\t\t\tvar scrollContainerPos = -parseInt(overflowDIV.offset().top);\r\n\r\n\t\t\t\t\t\tdestination += scrollContainerScroll + scrollContainerPos - 5;\r\n\t\t\t\t\t\tvar scrollContainer = $(options.overflownDIV).filter(\":not(:animated)\");\r\n\r\n\t\t\t\t\t\tscrollContainer.animate({ scrollTop: destination }, 1100, function(){\r\n\t\t\t\t\t\t\tif(options.focusFirstField) first_err.focus();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(\"html, body\").animate({\r\n\t\t\t\t\t\t\tscrollTop: destination\r\n\t\t\t\t\t\t}, 1100, function(){\r\n\t\t\t\t\t\t\tif(options.focusFirstField) first_err.focus();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$(\"html, body\").animate({scrollLeft: fixleft},1100)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if(options.focusFirstField)\r\n\t\t\t\t\tfirst_err.focus();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t* This method is called to perform an ajax form validation.\r\n\t\t* During this process all the (field, value) pairs are sent to the server which returns a list of invalid fields or true\r\n\t\t*\r\n\t\t* @param {jqObject} form\r\n\t\t* @param {Map} options\r\n\t\t*/\r\n\t\t_validateFormWithAjax: function(form, options) {\r\n\r\n\t\t\tvar data = form.serialize();\r\n\t\t\t\t\t\t\t\t\tvar type = (options.ajaxFormValidationMethod) ? options.ajaxFormValidationMethod : \"GET\";\r\n\t\t\tvar url = (options.ajaxFormValidationURL) ? options.ajaxFormValidationURL : form.attr(\"action\");\r\n\t\t\t\t\t\t\t\t\tvar dataType = (options.dataType) ? options.dataType : \"json\";\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: type,\r\n\t\t\t\turl: url,\r\n\t\t\t\tcache: false,\r\n\t\t\t\tdataType: dataType,\r\n\t\t\t\tdata: data,\r\n\t\t\t\tform: form,\r\n\t\t\t\tmethods: methods,\r\n\t\t\t\toptions: options,\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\treturn options.onBeforeAjaxFormValidation(form, options);\r\n\t\t\t\t},\r\n\t\t\t\terror: function(data, transport) {\r\n\t\t\t\t\tif (options.onFailure) {\r\n\t\t\t\t\t\toptions.onFailure(data, transport);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmethods._ajaxError(data, transport);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(json) {\r\n\t\t\t\t\tif ((dataType == \"json\") && (json !== true)) {\r\n\t\t\t\t\t\t// getting to this case doesn't necessary means that the form is invalid\r\n\t\t\t\t\t\t// the server may return green or closing prompt actions\r\n\t\t\t\t\t\t// this flag helps figuring it out\r\n\t\t\t\t\t\tvar errorInForm=false;\r\n\t\t\t\t\t\tfor (var i = 0; i < json.length; i++) {\r\n\t\t\t\t\t\t\tvar value = json[i];\r\n\r\n\t\t\t\t\t\t\tvar errorFieldId = value[0];\r\n\t\t\t\t\t\t\tvar errorField = $($(\"#\" + errorFieldId)[0]);\r\n\r\n\t\t\t\t\t\t\t// make sure we found the element\r\n\t\t\t\t\t\t\tif (errorField.length == 1) {\r\n\r\n\t\t\t\t\t\t\t\t// promptText or selector\r\n\t\t\t\t\t\t\t\tvar msg = value[2];\r\n\t\t\t\t\t\t\t\t// if the field is valid\r\n\t\t\t\t\t\t\t\tif (value[1] == true) {\r\n\r\n\t\t\t\t\t\t\t\t\tif (msg == \"\"  || !msg){\r\n\t\t\t\t\t\t\t\t\t\t// if for some reason, status==true and error=\"\", just close the prompt\r\n\t\t\t\t\t\t\t\t\t\tmethods._closePrompt(errorField);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t// the field is valid, but we are displaying a green prompt\r\n\t\t\t\t\t\t\t\t\t\tif (options.allrules[msg]) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar txt = options.allrules[msg].alertTextOk;\r\n\t\t\t\t\t\t\t\t\t\t\tif (txt)\r\n\t\t\t\t\t\t\t\t\t\t\t\tmsg = txt;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (options.showPrompts) methods._showPrompt(errorField, msg, \"pass\", false, options, true);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// the field is invalid, show the red error prompt\r\n\t\t\t\t\t\t\t\t\terrorInForm|=true;\r\n\t\t\t\t\t\t\t\t\tif (options.allrules[msg]) {\r\n\t\t\t\t\t\t\t\t\t\tvar txt = options.allrules[msg].alertText;\r\n\t\t\t\t\t\t\t\t\t\tif (txt)\r\n\t\t\t\t\t\t\t\t\t\t\tmsg = txt;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif(options.showPrompts) methods._showPrompt(errorField, msg, \"\", false, options, true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\toptions.onAjaxFormComplete(!errorInForm, form, json, options);\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\toptions.onAjaxFormComplete(true, form, json, options);\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t* Validates field, shows prompts accordingly\r\n\t\t*\r\n\t\t* @param {jqObject}\r\n\t\t*            field\r\n\t\t* @param {Array[String]}\r\n\t\t*            field's validation rules\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return false if field is valid (It is inversed for *fields*, it return false on validate and true on errors.)\r\n\t\t*/\r\n\t\t_validateField: function(field, options, skipAjaxValidation) {\r\n\t\t\tif (!field.attr(\"id\")) {\r\n\t\t\t\tfield.attr(\"id\", \"form-validation-field-\" + $.validationEngine.fieldIdCounter);\r\n\t\t\t\t++$.validationEngine.fieldIdCounter;\r\n\t\t\t}\r\n\t\t\tif ((!options.validateNonVisibleFields && (field.is(\":hidden\") && !options.prettySelect || field.parent().is(\":hidden\"))) || field.closest('.noValidate').length > 0)\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tif(field.hasClass(options.ignoreFieldsWithClass))\r\n\t\t\t\treturn false;\r\n\r\n           if (!options.validateNonVisibleFields && (field.is(\":hidden\") && !options.prettySelect || field.parent().is(\":hidden\")))\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar rulesParsing = field.attr(options.validateAttribute);\r\n\t\t\tvar getRules = /validate\\[(.*)\\]/.exec(rulesParsing);\r\n\r\n\t\t\tif (!getRules)\r\n\t\t\t\treturn false;\r\n\t\t\tvar str = getRules[1];\r\n\t\t\tvar rules = str.split(/\\[|,|\\]/);\r\n\r\n\t\t\t// true if we ran the ajax validation, tells the logic to stop messing with prompts\r\n\t\t\tvar isAjaxValidator = false;\r\n\t\t\tvar fieldName = field.attr(\"name\");\r\n\t\t\tvar promptText = \"\";\r\n\t\t\tvar promptType = \"\";\r\n\t\t\tvar required = false;\r\n\t\t\tvar limitErrors = false;\r\n\t\t\toptions.isError = false;\r\n\t\t\toptions.showArrow = options.showArrow ==true;\r\n\r\n\t\t\t// If the programmer wants to limit the amount of error messages per field,\r\n\t\t\tif (options.maxErrorsPerField > 0) {\r\n\t\t\t\tlimitErrors = true;\r\n\t\t\t}\r\n\r\n\t\t\tvar form = $(field.closest(\"form, .validationEngineContainer\"));\r\n\t\t\t// Fix for adding spaces in the rules\r\n\t\t\tfor (var i = 0; i < rules.length; i++) {\r\n\t\t\t\trules[i] = rules[i].toString().replace(\" \", \"\");//.toString to worked on IE8\r\n\t\t\t\t// Remove any parsing errors\r\n\t\t\t\tif (rules[i] === '') {\r\n\t\t\t\t\tdelete rules[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0, field_errors = 0; i < rules.length; i++) {\r\n\r\n\t\t\t\t// If we are limiting errors, and have hit the max, break\r\n\t\t\t\tif (limitErrors && field_errors >= options.maxErrorsPerField) {\r\n\t\t\t\t\t// If we haven't hit a required yet, check to see if there is one in the validation rules for this\r\n\t\t\t\t\t// field and that it's index is greater or equal to our current index\r\n\t\t\t\t\tif (!required) {\r\n\t\t\t\t\t\tvar have_required = $.inArray('required', rules);\r\n\t\t\t\t\t\trequired = (have_required != -1 &&  have_required >= i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar errorMsg = undefined;\r\n\t\t\t\tswitch (rules[i]) {\r\n\r\n\t\t\t\t\tcase \"required\":\r\n\t\t\t\t\t\trequired = true;\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._required);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"custom\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._custom);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"groupRequired\":\r\n\t\t\t\t\t\t// Check is its the first of group, if not, reload validation with first field\r\n\t\t\t\t\t\t// AND continue normal validation on present field\r\n\t\t\t\t\t\tvar classGroup = \"[\"+options.validateAttribute+\"*=\" +rules[i + 1] +\"]\";\r\n\t\t\t\t\t\tvar firstOfGroup = form.find(classGroup).eq(0);\r\n\t\t\t\t\t\tif(firstOfGroup[0] != field[0]){\r\n\r\n\t\t\t\t\t\t\tmethods._validateField(firstOfGroup, options, skipAjaxValidation);\r\n\t\t\t\t\t\t\toptions.showArrow = true;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._groupRequired);\r\n\t\t\t\t\t\tif(errorMsg)  required = true;\r\n\t\t\t\t\t\toptions.showArrow = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"ajax\":\r\n\t\t\t\t\t\t// AJAX defaults to returning it's loading message\r\n\t\t\t\t\t\terrorMsg = methods._ajax(field, rules, i, options);\r\n\t\t\t\t\t\tif (errorMsg) {\r\n\t\t\t\t\t\t\tpromptType = \"load\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"minSize\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._minSize);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"maxSize\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._maxSize);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"min\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._min);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"max\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._max);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"past\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field,rules[i], rules, i, options, methods._past);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"future\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field,rules[i], rules, i, options, methods._future);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"dateRange\":\r\n\t\t\t\t\t\tvar classGroup = \"[\"+options.validateAttribute+\"*=\" + rules[i + 1] + \"]\";\r\n\t\t\t\t\t\toptions.firstOfGroup = form.find(classGroup).eq(0);\r\n\t\t\t\t\t\toptions.secondOfGroup = form.find(classGroup).eq(1);\r\n\r\n\t\t\t\t\t\t//if one entry out of the pair has value then proceed to run through validation\r\n\t\t\t\t\t\tif (options.firstOfGroup[0].value || options.secondOfGroup[0].value) {\r\n\t\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field,rules[i], rules, i, options, methods._dateRange);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (errorMsg) required = true;\r\n\t\t\t\t\t\toptions.showArrow = false;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"dateTimeRange\":\r\n\t\t\t\t\t\tvar classGroup = \"[\"+options.validateAttribute+\"*=\" + rules[i + 1] + \"]\";\r\n\t\t\t\t\t\toptions.firstOfGroup = form.find(classGroup).eq(0);\r\n\t\t\t\t\t\toptions.secondOfGroup = form.find(classGroup).eq(1);\r\n\r\n\t\t\t\t\t\t//if one entry out of the pair has value then proceed to run through validation\r\n\t\t\t\t\t\tif (options.firstOfGroup[0].value || options.secondOfGroup[0].value) {\r\n\t\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field,rules[i], rules, i, options, methods._dateTimeRange);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (errorMsg) required = true;\r\n\t\t\t\t\t\toptions.showArrow = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"maxCheckbox\":\r\n\t\t\t\t\t\tfield = $(form.find(\"input[name='\" + fieldName + \"']\"));\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._maxCheckbox);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"minCheckbox\":\r\n\t\t\t\t\t\tfield = $(form.find(\"input[name='\" + fieldName + \"']\"));\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._minCheckbox);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"equals\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._equals);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"funcCall\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._funcCall);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"creditCard\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._creditCard);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"condRequired\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._condRequired);\r\n\t\t\t\t\t\tif (errorMsg !== undefined) {\r\n\t\t\t\t\t\t\trequired = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"funcCallRequired\":\r\n\t\t\t\t\t\terrorMsg = methods._getErrorMessage(form, field, rules[i], rules, i, options, methods._funcCallRequired);\r\n\t\t\t\t\t\tif (errorMsg !== undefined) {\r\n\t\t\t\t\t\t\trequired = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar end_validation = false;\r\n\r\n\t\t\t\t// If we were passed back an message object, check what the status was to determine what to do\r\n\t\t\t\tif (typeof errorMsg == \"object\") {\r\n\t\t\t\t\tswitch (errorMsg.status) {\r\n\t\t\t\t\t\tcase \"_break\":\r\n\t\t\t\t\t\t\tend_validation = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// If we have an error message, set errorMsg to the error message\r\n\t\t\t\t\t\tcase \"_error\":\r\n\t\t\t\t\t\t\terrorMsg = errorMsg.message;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// If we want to throw an error, but not show a prompt, return early with true\r\n\t\t\t\t\t\tcase \"_error_no_prompt\":\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// Anything else we continue on\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//funcCallRequired, first in rules, and has error, skip anything else\r\n\t\t\t\tif( i==0 && str.indexOf('funcCallRequired')==0 && errorMsg !== undefined ){\r\n\t\t\t\t\tif(promptText != '') {\r\n\t\t\t\t\t\tpromptText += \"<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpromptText += errorMsg;\r\n\t\t\t\t\toptions.isError=true;\r\n\t\t\t\t\tfield_errors++;\r\n\t\t\t\t\tend_validation=true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If it has been specified that validation should end now, break\r\n\t\t\t\tif (end_validation) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If we have a string, that means that we have an error, so add it to the error message.\r\n\t\t\t\tif (typeof errorMsg == 'string') {\r\n\t\t\t\t\tif(promptText != '') {\r\n\t\t\t\t\t\tpromptText += \"<br/>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpromptText += errorMsg;\r\n\t\t\t\t\toptions.isError = true;\r\n\t\t\t\t\tfield_errors++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// If the rules required is not added, an empty field is not validated\r\n\t\t\t//the 3rd condition is added so that even empty password fields should be equal\r\n\t\t\t//otherwise if one is filled and another left empty, the \"equal\" condition would fail\r\n\t\t\t//which does not make any sense\r\n\t\t\tif(!required && !(field.val()) && field.val().length < 1 && $.inArray('equals', rules) < 0) options.isError = false;\r\n\r\n\t\t\t// Hack for radio/checkbox group button, the validation go into the\r\n\t\t\t// first radio/checkbox of the group\r\n\t\t\tvar fieldType = field.prop(\"type\");\r\n\t\t\tvar positionType=field.data(\"promptPosition\") || options.promptPosition;\r\n\r\n\t\t\tif ((fieldType == \"radio\" || fieldType == \"checkbox\") && form.find(\"input[name='\" + fieldName + \"']\").length > 1) {\r\n\t\t\t\tif(positionType === 'inline') {\r\n\t\t\t\t\tfield = $(form.find(\"input[name='\" + fieldName + \"'][type!=hidden]:last\"));\r\n\t\t\t\t} else {\r\n\t\t\t\tfield = $(form.find(\"input[name='\" + fieldName + \"'][type!=hidden]:first\"));\r\n\t\t\t\t}\r\n\t\t\t\toptions.showArrow = options.showArrowOnRadioAndCheckbox;\r\n\t\t\t}\r\n\r\n\t\t\tif (field.is(\":hidden\") && options.prettySelect && !field.is('textarea')) {\r\n\t\t\t\tvar jqSelector = methods._jqSelector(field.attr('id'));\r\n\t\t\t\tfield = form.find(\"#\" + options.usePrefix + jqSelector);\r\n\t\t\t\tif (field.length <= 0) {\r\n\t\t\t\t\tfield = form.find(\"#\" + jqSelector + options.useSuffix);\r\n}\r\n\t\t\t}\r\n\r\n\t\t\tif (options.isError && options.showPrompts){\r\n\t\t\t\tmethods._showPrompt(field, promptText, promptType, false, options);\r\n\t\t\t}else{\r\n\t\t\t\tif (!isAjaxValidator) methods._closePrompt(field);\r\n\t\t\t}\r\n\r\n\t\t\tif (!isAjaxValidator) {\r\n\t\t\t\tfield.trigger(\"jqv.field.result\", [field, options.isError, promptText]);\r\n\t\t\t}\r\n\r\n\t\t\t/* Record error */\r\n\t\t\tvar errindex = $.inArray(field[0], options.InvalidFields);\r\n\t\t\tif (errindex == -1) {\r\n\t\t\t\tif (options.isError)\r\n\t\t\t\toptions.InvalidFields.push(field[0]);\r\n\t\t\t} else if (!options.isError) {\r\n\t\t\t\toptions.InvalidFields.splice(errindex, 1);\r\n\t\t\t}\r\n\r\n\t\t\tmethods._handleStatusCssClasses(field, options);\r\n\r\n\t\t\t/* run callback function for each field */\r\n\t\t\tif (options.isError && options.onFieldFailure)\r\n\t\t\t\toptions.onFieldFailure(field);\r\n\r\n\t\t\tif (!options.isError && options.onFieldSuccess)\r\n\t\t\t\toptions.onFieldSuccess(field);\r\n\r\n\t\t\treturn options.isError;\r\n\t\t},\r\n\t\t/**\r\n\t\t* Handling css classes of fields indicating result of validation\r\n\t\t*\r\n\t\t* @param {jqObject}\r\n\t\t*            field\r\n\t\t* @param {Array[String]}\r\n\t\t*            field's validation rules\r\n\t\t* @private\r\n\t\t*/\r\n\t\t_handleStatusCssClasses: function(field, options) {\r\n\t\t\t/* remove all classes */\r\n\t\t\tif(options.addSuccessCssClassToField)\r\n\t\t\t\tfield.removeClass(options.addSuccessCssClassToField);\r\n\r\n\t\t\tif(options.addFailureCssClassToField)\r\n\t\t\t\tfield.removeClass(options.addFailureCssClassToField);\r\n\r\n\t\t\t/* Add classes */\r\n\t\t\tif (options.addSuccessCssClassToField && !options.isError)\r\n\t\t\t\tfield.addClass(options.addSuccessCssClassToField);\r\n\r\n\t\t\tif (options.addFailureCssClassToField && options.isError)\r\n\t\t\t\tfield.addClass(options.addFailureCssClassToField);\r\n\t\t},\r\n\r\n\t\t /********************\r\n\t\t  * _getErrorMessage\r\n\t\t  *\r\n\t\t  * @param form\r\n\t\t  * @param field\r\n\t\t  * @param rule\r\n\t\t  * @param rules\r\n\t\t  * @param i\r\n\t\t  * @param options\r\n\t\t  * @param originalValidationMethod\r\n\t\t  * @return {*}\r\n\t\t  * @private\r\n\t\t  */\r\n\t\t _getErrorMessage:function (form, field, rule, rules, i, options, originalValidationMethod) {\r\n\t\t\t // If we are using the custon validation type, build the index for the rule.\r\n\t\t\t // Otherwise if we are doing a function call, make the call and return the object\r\n\t\t\t // that is passed back.\r\n\t \t\t var rule_index = jQuery.inArray(rule, rules);\r\n\t\t\t if (rule === \"custom\" || rule === \"funcCall\" || rule === \"funcCallRequired\") {\r\n\t\t\t\t var custom_validation_type = rules[rule_index + 1];\r\n\t\t\t\t rule = rule + \"[\" + custom_validation_type + \"]\";\r\n\t\t\t\t // Delete the rule from the rules array so that it doesn't try to call the\r\n\t\t\t    // same rule over again\r\n\t\t\t    delete(rules[rule_index]);\r\n\t\t\t }\r\n\t\t\t // Change the rule to the composite rule, if it was different from the original\r\n\t\t\t var alteredRule = rule;\r\n\r\n\r\n\t\t\t var element_classes = (field.attr(\"data-validation-engine\")) ? field.attr(\"data-validation-engine\") : field.attr(\"class\");\r\n\t\t\t var element_classes_array = element_classes.split(\" \");\r\n\r\n\t\t\t // Call the original validation method. If we are dealing with dates or checkboxes, also pass the form\r\n\t\t\t var errorMsg;\r\n\t\t\t if (rule == \"future\" || rule == \"past\"  || rule == \"maxCheckbox\" || rule == \"minCheckbox\") {\r\n\t\t\t\t errorMsg = originalValidationMethod(form, field, rules, i, options);\r\n\t\t\t } else {\r\n\t\t\t\t errorMsg = originalValidationMethod(field, rules, i, options);\r\n\t\t\t }\r\n\r\n\t\t\t // If the original validation method returned an error and we have a custom error message,\r\n\t\t\t // return the custom message instead. Otherwise return the original error message.\r\n\t\t\t if (errorMsg != undefined) {\r\n\t\t\t\t var custom_message = methods._getCustomErrorMessage($(field), element_classes_array, alteredRule, options);\r\n\t\t\t\t if (custom_message) errorMsg = custom_message;\r\n\t\t\t }\r\n\t\t\t return errorMsg;\r\n\r\n\t\t },\r\n\t\t _getCustomErrorMessage:function (field, classes, rule, options) {\r\n\t\t\tvar custom_message = false;\r\n\t\t\tvar validityProp = /^custom\\[.*\\]$/.test(rule) ? methods._validityProp[\"custom\"] : methods._validityProp[rule];\r\n\t\t\t // If there is a validityProp for this rule, check to see if the field has an attribute for it\r\n\t\t\tif (validityProp != undefined) {\r\n\t\t\t\tcustom_message = field.attr(\"data-errormessage-\"+validityProp);\r\n\t\t\t\t// If there was an error message for it, return the message\r\n\t\t\t\tif (custom_message != undefined)\r\n\t\t\t\t\treturn custom_message;\r\n\t\t\t}\r\n\t\t\tcustom_message = field.attr(\"data-errormessage\");\r\n\t\t\t // If there is an inline custom error message, return it\r\n\t\t\tif (custom_message != undefined)\r\n\t\t\t\treturn custom_message;\r\n\t\t\tvar id = '#' + field.attr(\"id\");\r\n\t\t\t// If we have custom messages for the element's id, get the message for the rule from the id.\r\n\t\t\t// Otherwise, if we have custom messages for the element's classes, use the first class message we find instead.\r\n\t\t\tif (typeof options.custom_error_messages[id] != \"undefined\" &&\r\n\t\t\t\ttypeof options.custom_error_messages[id][rule] != \"undefined\" ) {\r\n\t\t\t\t\t\t  custom_message = options.custom_error_messages[id][rule]['message'];\r\n\t\t\t} else if (classes.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < classes.length && classes.length > 0; i++) {\r\n\t\t\t\t\t var element_class = \".\" + classes[i];\r\n\t\t\t\t\tif (typeof options.custom_error_messages[element_class] != \"undefined\" &&\r\n\t\t\t\t\t\ttypeof options.custom_error_messages[element_class][rule] != \"undefined\") {\r\n\t\t\t\t\t\t\tcustom_message = options.custom_error_messages[element_class][rule]['message'];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!custom_message &&\r\n\t\t\t\ttypeof options.custom_error_messages[rule] != \"undefined\" &&\r\n\t\t\t\ttypeof options.custom_error_messages[rule]['message'] != \"undefined\"){\r\n\t\t\t\t\t custom_message = options.custom_error_messages[rule]['message'];\r\n\t\t\t }\r\n\t\t\t return custom_message;\r\n\t\t },\r\n\t\t _validityProp: {\r\n\t\t\t \"required\": \"value-missing\",\r\n\t\t\t \"custom\": \"custom-error\",\r\n\t\t\t \"groupRequired\": \"value-missing\",\r\n\t\t\t \"ajax\": \"custom-error\",\r\n\t\t\t \"minSize\": \"range-underflow\",\r\n\t\t\t \"maxSize\": \"range-overflow\",\r\n\t\t\t \"min\": \"range-underflow\",\r\n\t\t\t \"max\": \"range-overflow\",\r\n\t\t\t \"past\": \"type-mismatch\",\r\n\t\t\t \"future\": \"type-mismatch\",\r\n\t\t\t \"dateRange\": \"type-mismatch\",\r\n\t\t\t \"dateTimeRange\": \"type-mismatch\",\r\n\t\t\t \"maxCheckbox\": \"range-overflow\",\r\n\t\t\t \"minCheckbox\": \"range-underflow\",\r\n\t\t\t \"equals\": \"pattern-mismatch\",\r\n\t\t\t \"funcCall\": \"custom-error\",\r\n\t\t\t \"funcCallRequired\": \"custom-error\",\r\n\t\t\t \"creditCard\": \"pattern-mismatch\",\r\n\t\t\t \"condRequired\": \"value-missing\"\r\n\t\t },\r\n\t\t/**\r\n\t\t* Required validation\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @param {bool} condRequired flag when method is used for internal purpose in condRequired check\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_required: function(field, rules, i, options, condRequired) {\r\n\t\t\tswitch (field.prop(\"type\")) {\r\n\t\t\t\tcase \"radio\":\r\n\t\t\t\tcase \"checkbox\":\r\n\t\t\t\t\t// new validation style to only check dependent field\r\n\t\t\t\t\tif (condRequired) {\r\n\t\t\t\t\t\tif (!field.prop('checked')) {\r\n\t\t\t\t\t\t\treturn options.allrules[rules[i]].alertTextCheckboxMultiple;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// old validation style\r\n\t\t\t\t\tvar form = field.closest(\"form, .validationEngineContainer\");\r\n\t\t\t\t\tvar name = field.attr(\"name\");\r\n\t\t\t\t\tif (form.find(\"input[name='\" + name + \"']:checked\").length == 0) {\r\n\t\t\t\t\t\tif (form.find(\"input[name='\" + name + \"']:visible\").length == 1)\r\n\t\t\t\t\t\t\treturn options.allrules[rules[i]].alertTextCheckboxe;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\treturn options.allrules[rules[i]].alertTextCheckboxMultiple;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"text\":\r\n\t\t\t\tcase \"password\":\r\n\t\t\t\tcase \"textarea\":\r\n\t\t\t\tcase \"file\":\r\n\t\t\t\tcase \"select-one\":\r\n\t\t\t\tcase \"select-multiple\":\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tvar field_val      = $.trim( field.val()                               );\r\n\t\t\t\t\tvar dv_placeholder = $.trim( field.attr(\"data-validation-placeholder\") );\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t   ( !field_val                                    )\r\n\t\t\t\t\t\t|| ( dv_placeholder && field_val == dv_placeholder )\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\treturn options.allrules[rules[i]].alertText;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Validate that 1 from the group field is required\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_groupRequired: function(field, rules, i, options) {\r\n\t\t\tvar classGroup = \"[\"+options.validateAttribute+\"*=\" +rules[i + 1] +\"]\";\r\n\t\t\tvar isValid = false;\r\n\t\t\t// Check all fields from the group\r\n\t\t\tfield.closest(\"form, .validationEngineContainer\").find(classGroup).each(function(){\r\n\t\t\t\tif(!methods._required($(this), rules, i, options)){\r\n\t\t\t\t\tisValid = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(!isValid) {\r\n\t\t  return options.allrules[rules[i]].alertText;\r\n\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Validate rules\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_custom: function(field, rules, i, options) {\r\n\t\t\tvar customRule = rules[i + 1];\r\n\t\t\tvar rule = options.allrules[customRule];\r\n\t\t\tvar fn;\r\n\t\t\tif(!rule) {\r\n\t\t\t\talert(\"jqv:custom rule not found - \"+customRule);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(rule[\"regex\"]) {\r\n\t\t\t\t var ex=rule.regex;\r\n\t\t\t\t\tif(!ex) {\r\n\t\t\t\t\t\talert(\"jqv:custom regex not found - \"+customRule);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar pattern = new RegExp(ex);\r\n\r\n\t\t\t\t\tif (!pattern.test(field.val())) return options.allrules[customRule].alertText;\r\n\r\n\t\t\t} else if(rule[\"func\"]) {\r\n\t\t\t\tfn = rule[\"func\"];\r\n\r\n\t\t\t\tif (typeof(fn) !== \"function\") {\r\n\t\t\t\t\talert(\"jqv:custom parameter 'function' is no function - \"+customRule);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!fn(field, rules, i, options))\r\n\t\t\t\t\treturn options.allrules[customRule].alertText;\r\n\t\t\t} else {\r\n\t\t\t\talert(\"jqv:custom type not allowed \"+customRule);\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Validate custom function outside of the engine scope\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_funcCall: function(field, rules, i, options) {\r\n\t\t\tvar functionName = rules[i + 1];\r\n\t\t\tvar fn;\r\n\t\t\tif(functionName.indexOf('.') >-1)\r\n\t\t\t{\r\n\t\t\t\tvar namespaces = functionName.split('.');\r\n\t\t\t\tvar scope = window;\r\n\t\t\t\twhile(namespaces.length)\r\n\t\t\t\t{\r\n\t\t\t\t\tscope = scope[namespaces.shift()];\r\n\t\t\t\t}\r\n\t\t\t\tfn = scope;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tfn = window[functionName] || options.customFunctions[functionName];\r\n\t\t\tif (typeof(fn) == 'function')\r\n\t\t\t\treturn fn(field, rules, i, options);\r\n\r\n\t\t},\r\n\t\t_funcCallRequired: function(field, rules, i, options) {\r\n\t\t\treturn methods._funcCall(field,rules,i,options);\r\n\t\t},\r\n\t\t/**\r\n\t\t* Field match\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_equals: function(field, rules, i, options) {\r\n\t\t\tvar equalsField = rules[i + 1];\r\n\r\n\t\t\tif (field.val() != $(\"#\" + equalsField).val())\r\n\t\t\t\treturn options.allrules.equals.alertText;\r\n\t\t},\r\n\t\t/**\r\n\t\t* Check the maximum size (in characters)\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_maxSize: function(field, rules, i, options) {\r\n\t\t\tvar max = rules[i + 1];\r\n\t\t\tvar len = field.val().length;\r\n\r\n\t\t\tif (len > max) {\r\n\t\t\t\tvar rule = options.allrules.maxSize;\r\n\t\t\t\treturn rule.alertText + max + rule.alertText2;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Check the minimum size (in characters)\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_minSize: function(field, rules, i, options) {\r\n\t\t\tvar min = rules[i + 1];\r\n\t\t\tvar len = field.val().length;\r\n\r\n\t\t\tif (len < min) {\r\n\t\t\t\tvar rule = options.allrules.minSize;\r\n\t\t\t\treturn rule.alertText + min + rule.alertText2;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Check number minimum value\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_min: function(field, rules, i, options) {\r\n\t\t\tvar min = parseFloat(rules[i + 1]);\r\n\t\t\tvar len = parseFloat(field.val());\r\n\r\n\t\t\tif (len < min) {\r\n\t\t\t\tvar rule = options.allrules.min;\r\n\t\t\t\tif (rule.alertText2) return rule.alertText + min + rule.alertText2;\r\n\t\t\t\treturn rule.alertText + min;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Check number maximum value\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_max: function(field, rules, i, options) {\r\n\t\t\tvar max = parseFloat(rules[i + 1]);\r\n\t\t\tvar len = parseFloat(field.val());\r\n\r\n\t\t\tif (len >max ) {\r\n\t\t\t\tvar rule = options.allrules.max;\r\n\t\t\t\tif (rule.alertText2) return rule.alertText + max + rule.alertText2;\r\n\t\t\t\t//orefalo: to review, also do the translations\r\n\t\t\t\treturn rule.alertText + max;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Checks date is in the past\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_past: function(form, field, rules, i, options) {\r\n\r\n\t\t\tvar p=rules[i + 1];\r\n\t\t\tvar fieldAlt = $(form.find(\"*[name='\" + p.replace(/^#+/, '') + \"']\"));\r\n\t\t\tvar pdate;\r\n\r\n\t\t\tif (p.toLowerCase() == \"now\") {\r\n\t\t\t\tpdate = new Date();\r\n\t\t\t} else if (undefined != fieldAlt.val()) {\r\n\t\t\t\tif (fieldAlt.is(\":disabled\"))\r\n\t\t\t\t\treturn;\r\n\t\t\t\tpdate = methods._parseDate(fieldAlt.val());\r\n\t\t\t} else {\r\n\t\t\t\tpdate = methods._parseDate(p);\r\n\t\t\t}\r\n\t\t\tvar vdate = methods._parseDate(field.val());\r\n\r\n\t\t\tif (vdate > pdate ) {\r\n\t\t\t\tvar rule = options.allrules.past;\r\n\t\t\t\tif (rule.alertText2) return rule.alertText + methods._dateToString(pdate) + rule.alertText2;\r\n\t\t\t\treturn rule.alertText + methods._dateToString(pdate);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Checks date is in the future\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_future: function(form, field, rules, i, options) {\r\n\r\n\t\t\tvar p=rules[i + 1];\r\n\t\t\tvar fieldAlt = $(form.find(\"*[name='\" + p.replace(/^#+/, '') + \"']\"));\r\n\t\t\tvar pdate;\r\n\r\n\t\t\tif (p.toLowerCase() == \"now\") {\r\n\t\t\t\tpdate = new Date();\r\n\t\t\t} else if (undefined != fieldAlt.val()) {\r\n\t\t\t\tif (fieldAlt.is(\":disabled\"))\r\n\t\t\t\t\treturn;\r\n\t\t\t\tpdate = methods._parseDate(fieldAlt.val());\r\n\t\t\t} else {\r\n\t\t\t\tpdate = methods._parseDate(p);\r\n\t\t\t}\r\n\t\t\tvar vdate = methods._parseDate(field.val());\r\n\r\n\t\t\tif (vdate < pdate ) {\r\n\t\t\t\tvar rule = options.allrules.future;\r\n\t\t\t\tif (rule.alertText2)\r\n\t\t\t\t\treturn rule.alertText + methods._dateToString(pdate) + rule.alertText2;\r\n\t\t\t\treturn rule.alertText + methods._dateToString(pdate);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Checks if valid date\r\n\t\t*\r\n\t\t* @param {string} date string\r\n\t\t* @return a bool based on determination of valid date\r\n\t\t*/\r\n\t\t_isDate: function (value) {\r\n\t\t\tvar dateRegEx = new RegExp(/^\\d{4}[\\/\\-](0?[1-9]|1[012])[\\/\\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\\/|-)(?:29|30)))(\\/|-)(?:[1-9]\\d\\d\\d|\\d[1-9]\\d\\d|\\d\\d[1-9]\\d|\\d\\d\\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\\/|-)(?:0?[1-9]|1\\d|2[0-8]))(\\/|-)(?:[1-9]\\d\\d\\d|\\d[1-9]\\d\\d|\\d\\d[1-9]\\d|\\d\\d\\d[1-9])$|^(0?2(\\/|-)29)(\\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\\d\\d)?(?:0[48]|[2468][048]|[13579][26]))$/);\r\n\t\t\treturn dateRegEx.test(value);\r\n\t\t},\r\n\t\t/**\r\n\t\t* Checks if valid date time\r\n\t\t*\r\n\t\t* @param {string} date string\r\n\t\t* @return a bool based on determination of valid date time\r\n\t\t*/\r\n\t\t_isDateTime: function (value){\r\n\t\t\tvar dateTimeRegEx = new RegExp(/^\\d{4}[\\/\\-](0?[1-9]|1[012])[\\/\\-](0?[1-9]|[12][0-9]|3[01])\\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\\/|-)(?:29|30)))(\\/|-)(?:[1-9]\\d\\d\\d|\\d[1-9]\\d\\d|\\d\\d[1-9]\\d|\\d\\d\\d[1-9])$|^((1[012]|0?[1-9]){1}\\/(0?[1-9]|[12][0-9]|3[01]){1}\\/\\d{2,4}\\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\\s+(am|pm|AM|PM){1})$/);\r\n\t\t\treturn dateTimeRegEx.test(value);\r\n\t\t},\r\n\t\t//Checks if the start date is before the end date\r\n\t\t//returns true if end is later than start\r\n\t\t_dateCompare: function (start, end) {\r\n\t\t\treturn (new Date(start.toString()) < new Date(end.toString()));\r\n\t\t},\r\n\t\t/**\r\n\t\t* Checks date range\r\n\t\t*\r\n\t\t* @param {jqObject} first field name\r\n\t\t* @param {jqObject} second field name\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_dateRange: function (field, rules, i, options) {\r\n\t\t\t//are not both populated\r\n\t\t\tif ((!options.firstOfGroup[0].value && options.secondOfGroup[0].value) || (options.firstOfGroup[0].value && !options.secondOfGroup[0].value)) {\r\n\t\t\t\treturn options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;\r\n\t\t\t}\r\n\r\n\t\t\t//are not both dates\r\n\t\t\tif (!methods._isDate(options.firstOfGroup[0].value) || !methods._isDate(options.secondOfGroup[0].value)) {\r\n\t\t\t\treturn options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;\r\n\t\t\t}\r\n\r\n\t\t\t//are both dates but range is off\r\n\t\t\tif (!methods._dateCompare(options.firstOfGroup[0].value, options.secondOfGroup[0].value)) {\r\n\t\t\t\treturn options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Checks date time range\r\n\t\t*\r\n\t\t* @param {jqObject} first field name\r\n\t\t* @param {jqObject} second field name\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_dateTimeRange: function (field, rules, i, options) {\r\n\t\t\t//are not both populated\r\n\t\t\tif ((!options.firstOfGroup[0].value && options.secondOfGroup[0].value) || (options.firstOfGroup[0].value && !options.secondOfGroup[0].value)) {\r\n\t\t\t\treturn options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;\r\n\t\t\t}\r\n\t\t\t//are not both dates\r\n\t\t\tif (!methods._isDateTime(options.firstOfGroup[0].value) || !methods._isDateTime(options.secondOfGroup[0].value)) {\r\n\t\t\t\treturn options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;\r\n\t\t\t}\r\n\t\t\t//are both dates but range is off\r\n\t\t\tif (!methods._dateCompare(options.firstOfGroup[0].value, options.secondOfGroup[0].value)) {\r\n\t\t\t\treturn options.allrules[rules[i]].alertText + options.allrules[rules[i]].alertText2;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Max number of checkbox selected\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_maxCheckbox: function(form, field, rules, i, options) {\r\n\r\n\t\t\tvar nbCheck = rules[i + 1];\r\n\t\t\tvar groupname = field.attr(\"name\");\r\n\t\t\tvar groupSize = form.find(\"input[name='\" + groupname + \"']:checked\").length;\r\n\t\t\tif (groupSize > nbCheck) {\r\n\t\t\t\toptions.showArrow = false;\r\n\t\t\t\tif (options.allrules.maxCheckbox.alertText2)\r\n\t\t\t\t\t return options.allrules.maxCheckbox.alertText + \" \" + nbCheck + \" \" + options.allrules.maxCheckbox.alertText2;\r\n\t\t\t\treturn options.allrules.maxCheckbox.alertText;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Min number of checkbox selected\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_minCheckbox: function(form, field, rules, i, options) {\r\n\r\n\t\t\tvar nbCheck = rules[i + 1];\r\n\t\t\tvar groupname = field.attr(\"name\");\r\n\t\t\tvar groupSize = form.find(\"input[name='\" + groupname + \"']:checked\").length;\r\n\t\t\tif (groupSize < nbCheck) {\r\n\t\t\t\toptions.showArrow = false;\r\n\t\t\t\treturn options.allrules.minCheckbox.alertText + \" \" + nbCheck + \" \" + options.allrules.minCheckbox.alertText2;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Checks that it is a valid credit card number according to the\r\n\t\t* Luhn checksum algorithm.\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_creditCard: function(field, rules, i, options) {\r\n\t\t\t//spaces and dashes may be valid characters, but must be stripped to calculate the checksum.\r\n\t\t\tvar valid = false, cardNumber = field.val().replace(/ +/g, '').replace(/-+/g, '');\r\n\r\n\t\t\tvar numDigits = cardNumber.length;\r\n\t\t\tif (numDigits >= 14 && numDigits <= 16 && parseInt(cardNumber) > 0) {\r\n\r\n\t\t\t\tvar sum = 0, i = numDigits - 1, pos = 1, digit, luhn = new String();\r\n\t\t\t\tdo {\r\n\t\t\t\t\tdigit = parseInt(cardNumber.charAt(i));\r\n\t\t\t\t\tluhn += (pos++ % 2 == 0) ? digit * 2 : digit;\r\n\t\t\t\t} while (--i >= 0)\r\n\r\n\t\t\t\tfor (i = 0; i < luhn.length; i++) {\r\n\t\t\t\t\tsum += parseInt(luhn.charAt(i));\r\n\t\t\t\t}\r\n\t\t\t\tvalid = sum % 10 == 0;\r\n\t\t\t}\r\n\t\t\tif (!valid) return options.allrules.creditCard.alertText;\r\n\t\t},\r\n\t\t/**\r\n\t\t* Ajax field validation\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t*            user options\r\n\t\t* @return nothing! the ajax validator handles the prompts itself\r\n\t\t*/\r\n\t\t _ajax: function(field, rules, i, options) {\r\n\r\n\t\t\t var errorSelector = rules[i + 1];\r\n\t\t\t var rule = options.allrules[errorSelector];\r\n\t\t\t var extraData = rule.extraData;\r\n\t\t\t var extraDataDynamic = rule.extraDataDynamic;\r\n\t\t\t var data = {\r\n\t\t\t\t\"fieldId\" : field.attr(\"id\"),\r\n\t\t\t\t\"fieldValue\" : field.val()\r\n\t\t\t };\r\n\r\n\t\t\t if (typeof extraData === \"object\") {\r\n\t\t\t\t$.extend(data, extraData);\r\n\t\t\t } else if (typeof extraData === \"string\") {\r\n\t\t\t\tvar tempData = extraData.split(\"&\");\r\n\t\t\t\tfor(var i = 0; i < tempData.length; i++) {\r\n\t\t\t\t\tvar values = tempData[i].split(\"=\");\r\n\t\t\t\t\tif (values[0] && values[0]) {\r\n\t\t\t\t\t\tdata[values[0]] = values[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t }\r\n\r\n\t\t\t if (extraDataDynamic) {\r\n\t\t\t\t var tmpData = [];\r\n\t\t\t\t var domIds = String(extraDataDynamic).split(\",\");\r\n\t\t\t\t for (var i = 0; i < domIds.length; i++) {\r\n\t\t\t\t\t var id = domIds[i];\r\n\t\t\t\t\t if ($(id).length) {\r\n\t\t\t\t\t\t var inputValue = field.closest(\"form, .validationEngineContainer\").find(id).val();\r\n\t\t\t\t\t\t var keyValue = id.replace('#', '') + '=' + escape(inputValue);\r\n\t\t\t\t\t\t data[id.replace('#', '')] = inputValue;\r\n\t\t\t\t\t }\r\n\t\t\t\t }\r\n\t\t\t }\r\n\r\n\t\t\t // If a field change event triggered this we want to clear the cache for this ID\r\n\t\t\t if (options.eventTrigger == \"field\") {\r\n\t\t\t\tdelete(options.ajaxValidCache[field.attr(\"id\")]);\r\n\t\t\t }\r\n\r\n\t\t\t // If there is an error or if the the field is already validated, do not re-execute AJAX\r\n\t\t\t if (!options.isError && !methods._checkAjaxFieldStatus(field.attr(\"id\"), options)) {\r\n\t\t\t\t $.ajax({\r\n\t\t\t\t\t type: options.ajaxFormValidationMethod,\r\n\t\t\t\t\t url: rule.url,\r\n\t\t\t\t\t cache: false,\r\n\t\t\t\t\t dataType: \"json\",\r\n\t\t\t\t\t data: data,\r\n\t\t\t\t\t field: field,\r\n\t\t\t\t\t rule: rule,\r\n\t\t\t\t\t methods: methods,\r\n\t\t\t\t\t options: options,\r\n\t\t\t\t\t beforeSend: function() {},\r\n\t\t\t\t\t error: function(data, transport) {\r\n\t\t\t\t\t\tif (options.onFailure) {\r\n\t\t\t\t\t\t\toptions.onFailure(data, transport);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmethods._ajaxError(data, transport);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t },\r\n\t\t\t\t\t success: function(json) {\r\n\r\n\t\t\t\t\t\t // asynchronously called on success, data is the json answer from the server\r\n\t\t\t\t\t\t var errorFieldId = json[0];\r\n\t\t\t\t\t\t //var errorField = $($(\"#\" + errorFieldId)[0]);\r\n\t\t\t\t\t\t var errorField = $(\"#\"+ errorFieldId).eq(0);\r\n\r\n\t\t\t\t\t\t // make sure we found the element\r\n\t\t\t\t\t\t if (errorField.length == 1) {\r\n\t\t\t\t\t\t\t var status = json[1];\r\n\t\t\t\t\t\t\t // read the optional msg from the server\r\n\t\t\t\t\t\t\t var msg = json[2];\r\n\t\t\t\t\t\t\t if (!status) {\r\n\t\t\t\t\t\t\t\t // Houston we got a problem - display an red prompt\r\n\t\t\t\t\t\t\t\t options.ajaxValidCache[errorFieldId] = false;\r\n\t\t\t\t\t\t\t\t options.isError = true;\r\n\r\n\t\t\t\t\t\t\t\t // resolve the msg prompt\r\n\t\t\t\t\t\t\t\t if(msg) {\r\n\t\t\t\t\t\t\t\t\t if (options.allrules[msg]) {\r\n\t\t\t\t\t\t\t\t\t\t var txt = options.allrules[msg].alertText;\r\n\t\t\t\t\t\t\t\t\t\t if (txt) {\r\n\t\t\t\t\t\t\t\t\t\t\tmsg = txt;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t else\r\n\t\t\t\t\t\t\t\t\tmsg = rule.alertText;\r\n\r\n\t\t\t\t\t\t\t\t if (options.showPrompts) methods._showPrompt(errorField, msg, \"\", true, options);\r\n\t\t\t\t\t\t\t } else {\r\n\t\t\t\t\t\t\t\t options.ajaxValidCache[errorFieldId] = true;\r\n\r\n\t\t\t\t\t\t\t\t // resolves the msg prompt\r\n\t\t\t\t\t\t\t\t if(msg) {\r\n\t\t\t\t\t\t\t\t\t if (options.allrules[msg]) {\r\n\t\t\t\t\t\t\t\t\t\t var txt = options.allrules[msg].alertTextOk;\r\n\t\t\t\t\t\t\t\t\t\t if (txt) {\r\n\t\t\t\t\t\t\t\t\t\t\tmsg = txt;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t else\r\n\t\t\t\t\t\t\t\t msg = rule.alertTextOk;\r\n\r\n\t\t\t\t\t\t\t\t if (options.showPrompts) {\r\n\t\t\t\t\t\t\t\t\t // see if we should display a green prompt\r\n\t\t\t\t\t\t\t\t\t if (msg)\r\n\t\t\t\t\t\t\t\t\t\tmethods._showPrompt(errorField, msg, \"pass\", true, options);\r\n\t\t\t\t\t\t\t\t\t else\r\n\t\t\t\t\t\t\t\t\t\tmethods._closePrompt(errorField);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t // If a submit form triggered this, we want to re-submit the form\r\n\t\t\t\t\t\t\t\t if (options.eventTrigger == \"submit\")\r\n\t\t\t\t\t\t\t\t\tfield.closest(\"form\").submit();\r\n\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t }\r\n\t\t\t\t\t\t errorField.trigger(\"jqv.field.result\", [errorField, options.isError, msg]);\r\n\t\t\t\t\t }\r\n\t\t\t\t });\r\n\r\n\t\t\t\t return rule.alertTextLoad;\r\n\t\t\t }\r\n\t\t },\r\n\t\t/**\r\n\t\t* Common method to handle ajax errors\r\n\t\t*\r\n\t\t* @param {Object} data\r\n\t\t* @param {Object} transport\r\n\t\t*/\r\n\t\t_ajaxError: function(data, transport) {\r\n\t\t\tif(data.status == 0 && transport == null)\r\n\t\t\t\talert(\"The page is not served from a server! ajax call failed\");\r\n\t\t\telse if(typeof console != \"undefined\")\r\n\t\t\t\tconsole.log(\"Ajax error: \" + data.status + \" \" + transport);\r\n\t\t},\r\n\t\t/**\r\n\t\t* date -> string\r\n\t\t*\r\n\t\t* @param {Object} date\r\n\t\t*/\r\n\t\t_dateToString: function(date) {\r\n\t\t\treturn date.getFullYear()+\"-\"+(date.getMonth()+1)+\"-\"+date.getDate();\r\n\t\t},\r\n\t\t/**\r\n\t\t* Parses an ISO date\r\n\t\t* @param {String} d\r\n\t\t*/\r\n\t\t_parseDate: function(d) {\r\n\r\n\t\t\tvar dateParts = d.split(\"-\");\r\n\t\t\tif(dateParts==d)\r\n\t\t\t\tdateParts = d.split(\"/\");\r\n\t\t\tif(dateParts==d) {\r\n\t\t\t\tdateParts = d.split(\".\");\r\n\t\t\t\treturn new Date(dateParts[2], (dateParts[1] - 1), dateParts[0]);\r\n\t\t\t}\r\n\t\t\treturn new Date(dateParts[0], (dateParts[1] - 1) ,dateParts[2]);\r\n\t\t},\r\n\t\t/**\r\n\t\t* Builds or updates a prompt with the given information\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {String} promptText html text to display type\r\n\t\t* @param {String} type the type of bubble: 'pass' (green), 'load' (black) anything else (red)\r\n\t\t* @param {boolean} ajaxed - use to mark fields than being validated with ajax\r\n\t\t* @param {Map} options user options\r\n\t\t*/\r\n\t\t _showPrompt: function(field, promptText, type, ajaxed, options, ajaxform) {\r\n\t\t \t//Check if we need to adjust what element to show the prompt on\r\n\t\t\tif(field.data('jqv-prompt-at') instanceof jQuery ){\r\n\t\t\t\tfield = field.data('jqv-prompt-at');\r\n\t\t\t} else if(field.data('jqv-prompt-at')) {\r\n\t\t\t\tfield = $(field.data('jqv-prompt-at'));\r\n\t\t\t}\r\n\r\n\t\t\t var prompt = methods._getPrompt(field);\r\n\t\t\t // The ajax submit errors are not see has an error in the form,\r\n\t\t\t // When the form errors are returned, the engine see 2 bubbles, but those are ebing closed by the engine at the same time\r\n\t\t\t // Because no error was found befor submitting\r\n\t\t\t if(ajaxform) prompt = false;\r\n\t\t\t // Check that there is indded text\r\n\t\t\t if($.trim(promptText)){\r\n\t\t\t\t if (prompt)\r\n\t\t\t\t\tmethods._updatePrompt(field, prompt, promptText, type, ajaxed, options);\r\n\t\t\t\t else\r\n\t\t\t\t\tmethods._buildPrompt(field, promptText, type, ajaxed, options);\r\n\t\t\t}\r\n\t\t },\r\n\t\t/**\r\n\t\t* Builds and shades a prompt for the given field.\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {String} promptText html text to display type\r\n\t\t* @param {String} type the type of bubble: 'pass' (green), 'load' (black) anything else (red)\r\n\t\t* @param {boolean} ajaxed - use to mark fields than being validated with ajax\r\n\t\t* @param {Map} options user options\r\n\t\t*/\r\n\t\t_buildPrompt: function(field, promptText, type, ajaxed, options) {\r\n\r\n\t\t\t// create the prompt\r\n\t\t\tvar prompt = $('<div>');\r\n\t\t\tprompt.addClass(methods._getClassName(field.attr(\"id\")) + \"formError\");\r\n\t\t\t// add a class name to identify the parent form of the prompt\r\n\t\t\tprompt.addClass(\"parentForm\"+methods._getClassName(field.closest('form, .validationEngineContainer').attr(\"id\")));\r\n\t\t\tprompt.addClass(\"formError\");\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase \"pass\":\r\n\t\t\t\t\tprompt.addClass(\"greenPopup\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"load\":\r\n\t\t\t\t\tprompt.addClass(\"blackPopup\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t/* it has error  */\r\n\t\t\t\t\t//alert(\"unknown popup type:\"+type);\r\n\t\t\t}\r\n\t\t\tif (ajaxed)\r\n\t\t\t\tprompt.addClass(\"ajaxed\");\r\n\r\n\t\t\t// create the prompt content\r\n\t\t\tvar promptContent = $('<div>').addClass(\"formErrorContent\").html(promptText).appendTo(prompt);\r\n\r\n\t\t\t// determine position type\r\n\t\t\tvar positionType=field.data(\"promptPosition\") || options.promptPosition;\r\n\r\n\t\t\t// create the css arrow pointing at the field\r\n\t\t\t// note that there is no triangle on max-checkbox and radio\r\n\t\t\tif (options.showArrow) {\r\n\t\t\t\tvar arrow = $('<div>').addClass(\"formErrorArrow\");\r\n\r\n\t\t\t\t//prompt positioning adjustment support. Usage: positionType:Xshift,Yshift (for ex.: bottomLeft:+20 or bottomLeft:-20,+10)\r\n\t\t\t\tif (typeof(positionType)=='string')\r\n\t\t\t\t{\r\n\t\t\t\t\tvar pos=positionType.indexOf(\":\");\r\n\t\t\t\t\tif(pos!=-1)\r\n\t\t\t\t\t\tpositionType=positionType.substring(0,pos);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (positionType) {\r\n\t\t\t\t\tcase \"bottomLeft\":\r\n\t\t\t\t\tcase \"bottomRight\":\r\n\t\t\t\t\t\tprompt.find(\".formErrorContent\").before(arrow);\r\n\t\t\t\t\t\tarrow.addClass(\"formErrorArrowBottom\").html('<div class=\"line1\"><!-- --></div><div class=\"line2\"><!-- --></div><div class=\"line3\"><!-- --></div><div class=\"line4\"><!-- --></div><div class=\"line5\"><!-- --></div><div class=\"line6\"><!-- --></div><div class=\"line7\"><!-- --></div><div class=\"line8\"><!-- --></div><div class=\"line9\"><!-- --></div><div class=\"line10\"><!-- --></div>');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"topLeft\":\r\n\t\t\t\t\tcase \"topRight\":\r\n\t\t\t\t\t\tarrow.html('<div class=\"line10\"><!-- --></div><div class=\"line9\"><!-- --></div><div class=\"line8\"><!-- --></div><div class=\"line7\"><!-- --></div><div class=\"line6\"><!-- --></div><div class=\"line5\"><!-- --></div><div class=\"line4\"><!-- --></div><div class=\"line3\"><!-- --></div><div class=\"line2\"><!-- --></div><div class=\"line1\"><!-- --></div>');\r\n\t\t\t\t\t\tprompt.append(arrow);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Add custom prompt class\r\n\t\t\tif (options.addPromptClass)\r\n\t\t\t\tprompt.addClass(options.addPromptClass);\r\n\r\n            // Add custom prompt class defined in element\r\n            var requiredOverride = field.attr('data-required-class');\r\n            if(requiredOverride !== undefined) {\r\n                prompt.addClass(requiredOverride);\r\n            } else {\r\n                if(options.prettySelect) {\r\n                    if($('#' + field.attr('id')).next().is('select')) {\r\n                        var prettyOverrideClass = $('#' + field.attr('id').substr(options.usePrefix.length).substring(options.useSuffix.length)).attr('data-required-class');\r\n                        if(prettyOverrideClass !== undefined) {\r\n                            prompt.addClass(prettyOverrideClass);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n\t\t\tprompt.css({\r\n\t\t\t\t\"opacity\": 0\r\n\t\t\t});\r\n\t\t\tif(positionType === 'inline') {\r\n\t\t\t\tprompt.addClass(\"inline\");\r\n\t\t\t\tif(typeof field.attr('data-prompt-target') !== 'undefined' && $('#'+field.attr('data-prompt-target')).length > 0) {\r\n\t\t\t\t\tprompt.appendTo($('#'+field.attr('data-prompt-target')));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfield.after(prompt);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfield.before(prompt);\r\n\t\t\t}\r\n\r\n\t\t\tvar pos = methods._calculatePosition(field, prompt, options);\r\n\t\t\t// Support RTL layouts by @yasser_lotfy ( Yasser Lotfy )\r\n\t\t\tif ($('body').hasClass('rtl')) {\r\n\t\t\t\tprompt.css({\r\n\t\t\t\t\t'position': positionType === 'inline' ? 'relative' : 'absolute',\r\n\t\t\t\t\t\"top\": pos.callerTopPosition,\r\n\t\t\t\t\t\"left\": \"initial\",\r\n\t\t\t\t\t\"right\": pos.callerleftPosition,\r\n\t\t\t\t\t\"marginTop\": pos.marginTopSize,\r\n\t\t\t\t\t\"opacity\": 0\r\n\t\t\t\t}).data(\"callerField\", field);\r\n\t\t    \t} else {\r\n\t\t\t\tprompt.css({\r\n\t\t\t\t\t'position': positionType === 'inline' ? 'relative' : 'absolute',\r\n\t\t\t\t\t\"top\": pos.callerTopPosition,\r\n\t\t\t\t\t\"left\": pos.callerleftPosition,\r\n\t\t\t\t\t\"right\": \"initial\",\r\n\t\t\t\t\t\"marginTop\": pos.marginTopSize,\r\n\t\t\t\t\t\"opacity\": 0\r\n\t\t\t\t}).data(\"callerField\", field);\r\n\t\t    \t}\r\n\r\n\r\n\t\t\tif (options.autoHidePrompt) {\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tprompt.animate({\r\n\t\t\t\t\t\t\"opacity\": 0\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\tprompt.closest('.formError').remove();\r\n\t\t\t\t\t});\r\n\t\t\t\t}, options.autoHideDelay);\r\n\t\t\t}\r\n\t\t\treturn prompt.animate({\r\n\t\t\t\t\"opacity\": 0.87\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t* Updates the prompt text field - the field for which the prompt\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {String} promptText html text to display type\r\n\t\t* @param {String} type the type of bubble: 'pass' (green), 'load' (black) anything else (red)\r\n\t\t* @param {boolean} ajaxed - use to mark fields than being validated with ajax\r\n\t\t* @param {Map} options user options\r\n\t\t*/\r\n\t\t_updatePrompt: function(field, prompt, promptText, type, ajaxed, options, noAnimation) {\r\n\r\n\t\t\tif (prompt) {\r\n\t\t\t\tif (typeof type !== \"undefined\") {\r\n\t\t\t\t\tif (type == \"pass\")\r\n\t\t\t\t\t\tprompt.addClass(\"greenPopup\");\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tprompt.removeClass(\"greenPopup\");\r\n\r\n\t\t\t\t\tif (type == \"load\")\r\n\t\t\t\t\t\tprompt.addClass(\"blackPopup\");\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tprompt.removeClass(\"blackPopup\");\r\n\t\t\t\t}\r\n\t\t\t\tif (ajaxed)\r\n\t\t\t\t\tprompt.addClass(\"ajaxed\");\r\n\t\t\t\telse\r\n\t\t\t\t\tprompt.removeClass(\"ajaxed\");\r\n\r\n\t\t\t\tprompt.find(\".formErrorContent\").html(promptText);\r\n\r\n\t\t\t\tvar pos = methods._calculatePosition(field, prompt, options);\r\n\t\t\t\t// Support RTL layouts by @yasser_lotfy ( Yasser Lotfy )\r\n\t\t\t\tif ($('body').hasClass('rtl')) {\r\n\t\t\t\t\tvar css = {\"top\": pos.callerTopPosition,\r\n\t\t\t\t\t\"left\": \"initial\",\r\n\t\t\t\t\t\"right\": pos.callerleftPosition,\r\n\t\t\t\t\t\"marginTop\": pos.marginTopSize,\r\n\t\t\t\t\t\"opacity\": 0.87};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar css = {\"top\": pos.callerTopPosition,\r\n\t\t\t\t\t\"left\": pos.callerleftPosition,\r\n\t\t\t\t\t\"right\": \"initial\",\r\n\t\t\t\t\t\"marginTop\": pos.marginTopSize,\r\n\t\t\t\t\t\"opacity\": 0.87};\r\n\t\t\t\t}\r\n\r\n                prompt.css({\r\n                    \"opacity\": 0,\r\n                    \"display\": \"block\"\r\n                });\r\n\r\n\t\t\t\tif (noAnimation)\r\n\t\t\t\t\tprompt.css(css);\r\n\t\t\t\telse\r\n\t\t\t\t\tprompt.animate(css);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Closes the prompt associated with the given field\r\n\t\t*\r\n\t\t* @param {jqObject}\r\n\t\t*            field\r\n\t\t*/\r\n\t\t _closePrompt: function(field) {\r\n\t\t\t var prompt = methods._getPrompt(field);\r\n\t\t\t if (prompt)\r\n\t\t\t\t prompt.fadeTo(\"fast\", 0, function() {\r\n\t\t\t\t\t prompt.closest('.formError').remove();\r\n\t\t\t\t });\r\n\t\t },\r\n\t\t closePrompt: function(field) {\r\n\t\t\t return methods._closePrompt(field);\r\n\t\t },\r\n\t\t/**\r\n\t\t* Returns the error prompt matching the field if any\r\n\t\t*\r\n\t\t* @param {jqObject}\r\n\t\t*            field\r\n\t\t* @return undefined or the error prompt (jqObject)\r\n\t\t*/\r\n\t\t_getPrompt: function(field) {\r\n\t\t\t\tvar formId = $(field).closest('form, .validationEngineContainer').attr('id');\r\n\t\t\tvar className = methods._getClassName(field.attr(\"id\")) + \"formError\";\r\n\t\t\t\tvar match = $(\".\" + methods._escapeExpression(className) + '.parentForm' + methods._getClassName(formId))[0];\r\n\t\t\tif (match)\r\n\t\t\treturn $(match);\r\n\t\t},\r\n\t\t/**\r\n\t\t  * Returns the escapade classname\r\n\t\t  *\r\n\t\t  * @param {selector}\r\n\t\t  *            className\r\n\t\t  */\r\n\t\t  _escapeExpression: function (selector) {\r\n\t\t\t  return selector.replace(/([#;&,\\.\\+\\*\\~':\"\\!\\^$\\[\\]\\(\\)=>\\|])/g, \"\\\\$1\");\r\n\t\t  },\r\n\t\t/**\r\n\t\t * returns true if we are in a RTLed document\r\n\t\t *\r\n\t\t * @param {jqObject} field\r\n\t\t */\r\n\t\tisRTL: function(field)\r\n\t\t{\r\n\t\t\tvar $document = $(document);\r\n\t\t\tvar $body = $('body');\r\n\t\t\tvar rtl =\r\n\t\t\t\t(field && field.hasClass('rtl')) ||\r\n\t\t\t\t(field && (field.attr('dir') || '').toLowerCase()==='rtl') ||\r\n\t\t\t\t$document.hasClass('rtl') ||\r\n\t\t\t\t($document.attr('dir') || '').toLowerCase()==='rtl' ||\r\n\t\t\t\t$body.hasClass('rtl') ||\r\n\t\t\t\t($body.attr('dir') || '').toLowerCase()==='rtl';\r\n\t\t\treturn Boolean(rtl);\r\n\t\t},\r\n\t\t/**\r\n\t\t* Calculates prompt position\r\n\t\t*\r\n\t\t* @param {jqObject}\r\n\t\t*            field\r\n\t\t* @param {jqObject}\r\n\t\t*            the prompt\r\n\t\t* @param {Map}\r\n\t\t*            options\r\n\t\t* @return positions\r\n\t\t*/\r\n\t\t_calculatePosition: function (field, promptElmt, options) {\r\n\r\n\t\t\tvar promptTopPosition, promptleftPosition, marginTopSize;\r\n\t\t\tvar fieldWidth \t= field.width();\r\n\t\t\tvar fieldLeft \t= field.position().left;\r\n\t\t\tvar fieldTop \t=  field.position().top;\r\n\t\t\tvar fieldHeight \t=  field.height();\r\n\t\t\tvar promptHeight = promptElmt.height();\r\n\r\n\r\n\t\t\t// is the form contained in an overflown container?\r\n\t\t\tpromptTopPosition = promptleftPosition = 0;\r\n\t\t\t// compensation for the arrow\r\n\t\t\tmarginTopSize = -promptHeight;\r\n\r\n\r\n\t\t\t//prompt positioning adjustment support\r\n\t\t\t//now you can adjust prompt position\r\n\t\t\t//usage: positionType:Xshift,Yshift\r\n\t\t\t//for example:\r\n\t\t\t//   bottomLeft:+20 means bottomLeft position shifted by 20 pixels right horizontally\r\n\t\t\t//   topRight:20, -15 means topRight position shifted by 20 pixels to right and 15 pixels to top\r\n\t\t\t//You can use +pixels, - pixels. If no sign is provided than + is default.\r\n\t\t\tvar positionType=field.data(\"promptPosition\") || options.promptPosition;\r\n\t\t\tvar shift1=\"\";\r\n\t\t\tvar shift2=\"\";\r\n\t\t\tvar shiftX=0;\r\n\t\t\tvar shiftY=0;\r\n\t\t\tif (typeof(positionType)=='string') {\r\n\t\t\t\t//do we have any position adjustments ?\r\n\t\t\t\tif (positionType.indexOf(\":\")!=-1) {\r\n\t\t\t\t\tshift1=positionType.substring(positionType.indexOf(\":\")+1);\r\n\t\t\t\t\tpositionType=positionType.substring(0,positionType.indexOf(\":\"));\r\n\r\n\t\t\t\t\t//if any advanced positioning will be needed (percents or something else) - parser should be added here\r\n\t\t\t\t\t//for now we use simple parseInt()\r\n\r\n\t\t\t\t\t//do we have second parameter?\r\n\t\t\t\t\tif (shift1.indexOf(\",\") !=-1) {\r\n\t\t\t\t\t\tshift2=shift1.substring(shift1.indexOf(\",\") +1);\r\n\t\t\t\t\t\tshift1=shift1.substring(0,shift1.indexOf(\",\"));\r\n\t\t\t\t\t\tshiftY=parseInt(shift2);\r\n\t\t\t\t\t\tif (isNaN(shiftY)) shiftY=0;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tshiftX=parseInt(shift1);\r\n\t\t\t\t\tif (isNaN(shift1)) shift1=0;\r\n\r\n\t\t\t\t};\r\n\t\t\t};\r\n\r\n\r\n\t\t\tswitch (positionType) {\r\n\t\t\t\tdefault:\r\n\t\t\t\tcase \"topRight\":\r\n\t\t\t\t\tpromptleftPosition +=  fieldLeft + fieldWidth - 27;\r\n\t\t\t\t\tpromptTopPosition +=  fieldTop;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"topLeft\":\r\n\t\t\t\t\tpromptTopPosition +=  fieldTop;\r\n\t\t\t\t\tpromptleftPosition += fieldLeft;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"centerRight\":\r\n\t\t\t\t\tpromptTopPosition = fieldTop+4;\r\n\t\t\t\t\tmarginTopSize = 0;\r\n\t\t\t\t\tpromptleftPosition= fieldLeft + field.outerWidth(true)+5;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"centerLeft\":\r\n\t\t\t\t\tpromptleftPosition = fieldLeft - (promptElmt.width() + 2);\r\n\t\t\t\t\tpromptTopPosition = fieldTop+4;\r\n\t\t\t\t\tmarginTopSize = 0;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"bottomLeft\":\r\n\t\t\t\t\tpromptTopPosition = fieldTop + field.height() + 5;\r\n\t\t\t\t\tmarginTopSize = 0;\r\n\t\t\t\t\tpromptleftPosition = fieldLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"bottomRight\":\r\n\t\t\t\t\tpromptleftPosition = fieldLeft + fieldWidth - 27;\r\n\t\t\t\t\tpromptTopPosition =  fieldTop +  field.height() + 5;\r\n\t\t\t\t\tmarginTopSize = 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"inline\":\r\n\t\t\t\t\tpromptleftPosition = 0;\r\n\t\t\t\t\tpromptTopPosition = 0;\r\n\t\t\t\t\tmarginTopSize = 0;\r\n\t\t\t};\r\n\r\n\r\n\r\n\t\t\t//apply adjusments if any\r\n\t\t\tpromptleftPosition += shiftX;\r\n\t\t\tpromptTopPosition  += shiftY;\r\n\r\n\t\t\treturn {\r\n\t\t\t\t\"callerTopPosition\": promptTopPosition + \"px\",\r\n\t\t\t\t\"callerleftPosition\": promptleftPosition + \"px\",\r\n\t\t\t\t\"marginTopSize\": marginTopSize + \"px\"\r\n\t\t\t};\r\n\t\t},\r\n\t\t/**\r\n\t\t* Saves the user options and variables in the form.data\r\n\t\t*\r\n\t\t* @param {jqObject}\r\n\t\t*            form - the form where the user option should be saved\r\n\t\t* @param {Map}\r\n\t\t*            options - the user options\r\n\t\t* @return the user options (extended from the defaults)\r\n\t\t*/\r\n\t\t _saveOptions: function(form, options) {\r\n\r\n\t\t\t // is there a language localisation ?\r\n\t\t\t if ($.validationEngineLanguage)\r\n\t\t\t var allRules = $.validationEngineLanguage.allRules;\r\n\t\t\t else\r\n\t\t\t $.error(\"jQuery.validationEngine rules are not loaded, plz add localization files to the page\");\r\n\t\t\t // --- Internals DO NOT TOUCH or OVERLOAD ---\r\n\t\t\t // validation rules and i18\r\n\t\t\t $.validationEngine.defaults.allrules = allRules;\r\n\r\n\t\t\t var userOptions = $.extend(true,{},$.validationEngine.defaults,options);\r\n\r\n\t\t\t form.data('jqv', userOptions);\r\n\t\t\t return userOptions;\r\n\t\t },\r\n\r\n\t\t /**\r\n\t\t * Removes forbidden characters from class name\r\n\t\t * @param {String} className\r\n\t\t */\r\n\t\t _getClassName: function(className) {\r\n\t\t\t if(className)\r\n\t\t\t\t return className.replace(/:/g, \"_\").replace(/\\./g, \"_\");\r\n\t\t\t\t\t  },\r\n\t\t/**\r\n\t\t * Escape special character for jQuery selector\r\n\t\t * http://totaldev.com/content/escaping-characters-get-valid-jquery-id\r\n\t\t * @param {String} selector\r\n\t\t */\r\n\t\t _jqSelector: function(str){\r\n\t\t\treturn str.replace(/([;&,\\.\\+\\*\\~':\"\\!\\^#$%@\\[\\]\\(\\)=>\\|])/g, '\\\\$1');\r\n\t\t},\r\n\t\t/**\r\n\t\t* Conditionally required field\r\n\t\t*\r\n\t\t* @param {jqObject} field\r\n\t\t* @param {Array[String]} rules\r\n\t\t* @param {int} i rules index\r\n\t\t* @param {Map}\r\n\t\t* user options\r\n\t\t* @return an error string if validation failed\r\n\t\t*/\r\n\t\t_condRequired: function(field, rules, i, options) {\r\n\t\t\tvar idx, dependingField;\r\n\r\n\t\t\tfor(idx = (i + 1); idx < rules.length; idx++) {\r\n\t\t\t\tdependingField = jQuery(\"#\" + rules[idx]).first();\r\n\r\n\t\t\t\t/* Use _required for determining wether dependingField has a value.\r\n\t\t\t\t * There is logic there for handling all field types, and default value; so we won't replicate that here\r\n\t\t\t\t * Indicate this special use by setting the last parameter to true so we only validate the dependingField on chackboxes and radio buttons (#462)\r\n\t\t\t\t */\r\n\t\t\t\tif (dependingField.length && methods._required(dependingField, [\"required\"], 0, options, true) == undefined) {\r\n\t\t\t\t\t/* We now know any of the depending fields has a value,\r\n\t\t\t\t\t * so we can validate this field as per normal required code\r\n\t\t\t\t\t */\r\n\t\t\t\t\treturn methods._required(field, [\"required\"], 0, options);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t    _submitButtonClick: function(event) {\r\n\t        var button = $(this);\r\n\t        var form = button.closest('form, .validationEngineContainer');\r\n\t        form.data(\"jqv_submitButton\", button.attr(\"id\"));\r\n\t    }\r\n\t\t  };\r\n\r\n\t /**\r\n\t * Plugin entry point.\r\n\t * You may pass an action as a parameter or a list of options.\r\n\t * if none, the init and attach methods are being called.\r\n\t * Remember: if you pass options, the attached method is NOT called automatically\r\n\t *\r\n\t * @param {String}\r\n\t *            method (optional) action\r\n\t */\r\n\t $.fn.validationEngine = function(method) {\r\n\r\n\t\t var form = $(this);\r\n\t\t if(!form[0]) return form;  // stop here if the form does not exist\r\n\r\n\t\t if (typeof(method) == 'string' && method.charAt(0) != '_' && methods[method]) {\r\n\r\n\t\t\t // make sure init is called once\r\n\t\t\t if(method != \"showPrompt\" && method != \"hide\" && method != \"hideAll\")\r\n\t\t\t methods.init.apply(form);\r\n\r\n\t\t\t return methods[method].apply(form, Array.prototype.slice.call(arguments, 1));\r\n\t\t } else if (typeof method == 'object' || !method) {\r\n\r\n\t\t\t // default constructor with or without arguments\r\n\t\t\t methods.init.apply(form, arguments);\r\n\t\t\t return methods.attach.apply(form);\r\n\t\t } else {\r\n\t\t\t $.error('Method ' + method + ' does not exist in jQuery.validationEngine');\r\n\t\t }\r\n\t};\r\n\r\n\r\n\r\n\t// LEAK GLOBAL OPTIONS\r\n\t$.validationEngine= {fieldIdCounter: 0,defaults:{\r\n\r\n\t\t// Name of the event triggering field validation\r\n\t\tvalidationEventTrigger: \"blur\",\r\n\t\t// Automatically scroll viewport to the first error\r\n\t\tscroll: true,\r\n\t\t// Focus on the first input\r\n\t\tfocusFirstField:true,\r\n\t\t// Show prompts, set to false to disable prompts\r\n\t\tshowPrompts: true,\r\n\t\t// Should we attempt to validate non-visible input fields contained in the form? (Useful in cases of tabbed containers, e.g. jQuery-UI tabs)\r\n\t\tvalidateNonVisibleFields: false,\r\n\t\t// ignore the validation for fields with this specific class (Useful in cases of tabbed containers AND hidden fields we don't want to validate)\r\n\t\tignoreFieldsWithClass: 'ignoreMe',\r\n\t\t// Opening box position, possible locations are: topLeft,\r\n\t\t// topRight, bottomLeft, centerRight, bottomRight, inline\r\n\t\t// inline gets inserted after the validated field or into an element specified in data-prompt-target\r\n\t\tpromptPosition: \"topRight\",\r\n\t\tbindMethod:\"bind\",\r\n\t\t// internal, automatically set to true when it parse a _ajax rule\r\n\t\tinlineAjax: false,\r\n\t\t// if set to true, the form data is sent asynchronously via ajax to the form.action url (get)\r\n\t\tajaxFormValidation: false,\r\n\t\t// The url to send the submit ajax validation (default to action)\r\n\t\tajaxFormValidationURL: false,\r\n\t\t// HTTP method used for ajax validation\r\n\t\tajaxFormValidationMethod: 'get',\r\n\t\t// Ajax form validation callback method: boolean onComplete(form, status, errors, options)\r\n\t\t// retuns false if the form.submit event needs to be canceled.\r\n\t\tonAjaxFormComplete: $.noop,\r\n\t\t// called right before the ajax call, may return false to cancel\r\n\t\tonBeforeAjaxFormValidation: $.noop,\r\n\t\t// Stops form from submitting and execute function assiciated with it\r\n\t\tonValidationComplete: false,\r\n\r\n\t\t// Used when you have a form fields too close and the errors messages are on top of other disturbing viewing messages\r\n\t\tdoNotShowAllErrosOnSubmit: false,\r\n\t\t// Object where you store custom messages to override the default error messages\r\n\t\tcustom_error_messages:{},\r\n\t\t// true if you want to validate the input fields on blur event\r\n\t\tbinded: true,\r\n\t\t// set to true if you want to validate the input fields on blur only if the field it's not empty\r\n\t\tnotEmpty: false,\r\n\t\t// set to true, when the prompt arrow needs to be displayed\r\n\t\tshowArrow: true,\r\n\t\t// set to false, determines if the prompt arrow should be displayed when validating\r\n\t\t// checkboxes and radio buttons\r\n\t\tshowArrowOnRadioAndCheckbox: false,\r\n\t\t// did one of the validation fail ? kept global to stop further ajax validations\r\n\t\tisError: false,\r\n\t\t// Limit how many displayed errors a field can have\r\n\t\tmaxErrorsPerField: false,\r\n\r\n\t\t// Caches field validation status, typically only bad status are created.\r\n\t\t// the array is used during ajax form validation to detect issues early and prevent an expensive submit\r\n\t\tajaxValidCache: {},\r\n\t\t// Auto update prompt position after window resize\r\n\t\tautoPositionUpdate: false,\r\n\r\n\t\tInvalidFields: [],\r\n\t\tonFieldSuccess: false,\r\n\t\tonFieldFailure: false,\r\n\t\tonSuccess: false,\r\n\t\tonFailure: false,\r\n\t\tvalidateAttribute: \"class\",\r\n\t\taddSuccessCssClassToField: \"\",\r\n\t\taddFailureCssClassToField: \"\",\r\n\r\n\t\t// Auto-hide prompt\r\n\t\tautoHidePrompt: false,\r\n\t\t// Delay before auto-hide\r\n\t\tautoHideDelay: 10000,\r\n\t\t// Fade out duration while hiding the validations\r\n\t\tfadeDuration: 300,\r\n\t // Use Prettify select library\r\n\t prettySelect: false,\r\n\t // Add css class on prompt\r\n\t addPromptClass : \"\",\r\n\t // Custom ID uses prefix\r\n\t usePrefix: \"\",\r\n\t // Custom ID uses suffix\r\n\t useSuffix: \"\",\r\n\t // Only show one message per error prompt\r\n\t showOneMessage: false\r\n\t}};\r\n\t$(function(){$.validationEngine.defaults.promptPosition = methods.isRTL()?'topLeft':\"topRight\"});\r\n})(jQuery);\r\n"],"names":["$","init","options","data","methods","_saveOptions","form","document","on","fadeOut","closest","remove","attach","userOptions","validateAttribute","find","length","binded","validationEventTrigger","_onFieldEvent","autoPositionUpdate","window","bind","updatePromptsPosition","_submitButtonClick","removeData","_onSubmitEvent","detach","off","validate","element","valid","is","hasClass","addClass","_validateFields","setTimeout","removeClass","onSuccess","onFailure","validationEngine","defaults","_validateField","onFieldSuccess","onFieldFailure","InvalidFields","onValidationComplete","event","formElem","noAnimation","not","each","prettySelect","field","usePrefix","attr","useSuffix","_getPrompt","promptText","prompt","html","_updatePrompt","showPrompt","type","promptPosition","showArrow","_showPrompt","hide","fadeDuration","_getClassName","closingtag","fadeTo","hideAll","duration","eventTrigger","notEmpty","val","delay","submitButton","ajaxFormValidation","_validateFormWithAjax","r","_checkAjaxStatus","ajaxValidCache","key","value","status","_checkAjaxFieldStatus","fieldid","errorFound","trigger","names","inArray","first_err","_jqSelector","doNotShowAllErrosOnSubmit","push","showOneMessage","scroll","offset","top","fixleft","left","positionType","indexOf","substring","prompt_err","destination","scrollOffset","isOverflown","overflownDIV","overflowDIV","scrollTop","scrollContainerPos","parseInt","scrollContainerScroll","filter","scrollContainer","animate","focusFirstField","focus","scrollLeft","serialize","ajaxFormValidationMethod","url","ajaxFormValidationURL","dataType","ajax","cache","beforeSend","onBeforeAjaxFormValidation","error","transport","_ajaxError","success","json","i","errorFieldId","errorField","errorInForm","allrules","msg","alertText","txt","showPrompts","_closePrompt","alertTextOk","onAjaxFormComplete","skipAjaxValidation","fieldIdCounter","validateNonVisibleFields","parent","ignoreFieldsWithClass","getRules","exec","rulesParsing","rules","str","split","fieldName","promptType","required","limitErrors","isError","maxErrorsPerField","toString","replace","field_errors","have_required","errorMsg","_getErrorMessage","_required","_custom","firstOfGroup","classGroup","eq","_groupRequired","_ajax","_minSize","_maxSize","_min","_max","_past","_future","secondOfGroup","_dateRange","_dateTimeRange","_maxCheckbox","_minCheckbox","_equals","_funcCall","_creditCard","_condRequired","_funcCallRequired","end_validation","message","prop","showArrowOnRadioAndCheckbox","jqSelector","splice","errindex","_handleStatusCssClasses","addSuccessCssClassToField","addFailureCssClassToField","rule","originalValidationMethod","jQuery","rule_index","custom_validation_type","alteredRule","element_classes","element_classes_array","_getCustomErrorMessage","custom_message","classes","validityProp","test","_validityProp","custom_error_messages","id","element_class","condRequired","alertTextCheckboxMultiple","name","alertTextCheckboxe","trim","dv_placeholder","field_val","isValid","customRule","regex","ex","pattern","fn","functionName","scope","namespaces","shift","customFunctions","equalsField","equals","len","max","maxSize","alertText2","min","minSize","parseFloat","p","fieldAlt","toLowerCase","pdate","_parseDate","vdate","past","_dateToString","future","_isDate","_isDateTime","_dateCompare","start","end","groupname","groupSize","nbCheck","maxCheckbox","minCheckbox","cardNumber","numDigits","sum","pos","luhn","charAt","digit","creditCard","errorSelector","extraData","extraDataDynamic","extend","tempData","values","domIds","String","keyValue","escape","inputValue","submit","alertTextLoad","alert","console","log","date","getFullYear","getMonth","getDate","d","dateParts","ajaxed","ajaxform","_buildPrompt","appendTo","before","arrow","append","addPromptClass","requiredOverride","next","substr","prettyOverrideClass","css","after","_calculatePosition","callerTopPosition","callerleftPosition","marginTopSize","autoHidePrompt","autoHideDelay","closePrompt","className","match","_escapeExpression","formId","selector","isRTL","$body","rtl","$document","promptElmt","promptleftPosition","fieldWidth","width","fieldLeft","position","fieldTop","fieldHeight","height","promptHeight","promptTopPosition","shift1","shift2","shiftX","shiftY","isNaN","outerWidth","validationEngineLanguage","allRules","dependingField","idx","first","button","method","apply","Array","prototype","slice","call","arguments","bindMethod","inlineAjax","noop"],"mappings":"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"}