{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_TwoFactorAuthentication_Index_Js', {\n\tcheckIP: function(field, rules, i, options) {\n\t\tlet fieldValue = field.val(),\n\t\t\tnegativeRegex = /((^\\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\\s*$)|(^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$))/,\n\t\t\tresult = negativeRegex.test(fieldValue);\n\t\tif (!result) {\n\t\t\treturn app.vtranslate('INVALID_NUMBER');\n\t\t}\n\t},\n}, {\n\t/**\n\t * Container (Form)\n\t */\n\tcontainer: null,\n\t/**\n\t * Get Container (Form)\n\t * @returns {Object}\n\t */\n\tgetContainer(){\n\t\tif( this.container===null ){\n\t\t\tthis.container = $('form.js-two-factor-auth__form');\n\t\t}\n\t\treturn this.container;\n\t},\n\t/**\n\t * Register events for form\n\t */\n\tregisterForm(){\n\t\tlet thisInstance = this;\n\t\tthis.container.on('change', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tthisInstance.sendForm();\n\t\t});\n\t},\n\t/**\n\t * Send form data\n\t */\n\tsendForm: function(){\n\t\tthis.container.validationEngine(app.validationEngineOptions);\n\t\tif (this.container.validationEngine('validate')) {\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet params = this.container.serializeFormData();\n\t\t\tlet ipAddresses = [];\n\t\t\tlet ipAddressContainer = this.container.find('.js-ip-container_element').not('.js-base-element');\n\t\t\tipAddressContainer.find('.js-ip-address').each(function() {\n\t\t\t \tipAddresses.push($(this).val());\n\t\t\t });\n\t\t\tparams['ip'] = ipAddresses;\n\t\t\tAppConnector.request(params).done((response) => {\n\t\t\t\tprogressIndicatorElement.progressIndicator({mode: 'hide'});\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: response.result.message,\n\t\t\t\t\ttype: 'info',\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\t/**\n\t * Add new row\n\t */\n\taddRow: function() {\n\t\tlet sortContainer = this.container\n\t\t\t.find(\".js-base-element\")\n\t\t\t.clone(true, true)\n\t\t\t.removeClass(\"js-base-element\");\n\t\tthis.container.find(\".js-ip-container\").append(sortContainer);\n\t\treturn sortContainer.removeClass(\"d-none\");\n\t},\n\t/**\n\t * Register list events\n\t */\n\tregisterListEvents: function() {\n\t\tthis.container.find(\".js-add\").on(\"click\", e => {\n\t\t\tthis.addRow();\n\t\t});\n\t\tthis.container.find(\".js-clear\").on(\"click\", e => {\n\t\t\t$(e.currentTarget)\n\t\t\t\t.closest(\".js-ip-container_element\")\n\t\t\t\t.remove();\n\t\t\tthis.sendForm();\n\t\t});\n\t},\n\t/**\n\t * Register all events in view\n\t */\n\tregisterEvents() {\n\t\tthis.container = this.getContainer();\n\t\tthis.registerListEvents();\n\t\tthis.registerForm();\n\t}\n});\n"],"names":["jQuery","Class","checkIP","field","val","negativeRegex","result","test","fieldValue","vtranslate","container","getContainer","$","registerForm","on","event","preventDefault","thisInstance","sendForm","validationEngine","app","validationEngineOptions","progressIndicator","position","blockInfo","enabled","params","serializeFormData","ipAddresses","ipAddressContainer","find","not","each","push","AppConnector","request","done","response","progressIndicatorElement","mode","Vtiger_Helper_Js","showPnotify","text","message","type","addRow","clone","removeClass","append","sortContainer","registerListEvents","e","currentTarget","closest","remove","registerEvents"],"mappings":";;AAGAA,OAAOC,KAAP,CAAa,2CAAb,CAA0D,CACzDC,QAAS,iBAASC,KAAT,CAAmC,CAC3C,eAAiBA,MAAMC,GAAN,EAAjB,CACCC,cAAgB,irCADjB,CAECC,OAASD,cAAcE,IAAd,CAAmBC,UAAnB,CAFV,CAGA,GAAI,CAACF,MAAL,CACC,WAAWG,UAAJ,CAAe,gBAAf,CAER,CARwD,CAA1D,CASG;;IAIFC,UAAW,IAJT;;;IASFC,YATE,wBASY,CAIb,WAHI,QAAKD,SAGT,GAFC,KAAKA,SAAL,CAAiBE,EAAE,+BAAF,CAElB,EAAO,KAAKF,SACZ,CAdC;;IAkBFG,YAlBE,wBAkBY,CACb,iBAAmB,IAAnB,CACA,KAAKH,SAAL,CAAeI,EAAf,CAAkB,QAAlB,CAA4B,SAACC,KAAD,CAAW,CACtCA,MAAMC,cAAN,EADsC,CAEtCC,aAAaC,QAAb,GACA,CAHD,EAIA,CAxBC;;IA4BFA,SAAU,mBAAU,CAEnB,GADA,KAAKR,SAAL,CAAeS,gBAAf,CAAgCC,IAAIC,uBAApC,CACA,CAAI,KAAKX,SAAL,CAAeS,gBAAf,CAAgC,UAAhC,CAAJ,CAAiD,8BACjBP,EAAEU,iBAAF,CAAoB,CAClDC,SAAU,MADwC,CAElDC,UAAW,CACVC,UADU,CAFuC,CAApB,CADiB,CAO5CC,OAAS,KAAKhB,SAAL,CAAeiB,iBAAf,EAPmC,CAQ5CC,YAAc,EAR8B,CAS5CC,mBAAqB,KAAKnB,SAAL,CAAeoB,IAAf,CAAoB,0BAApB,EAAgDC,GAAhD,CAAoD,kBAApD,CATuB,CAUhDF,mBAAmBC,IAAnB,CAAwB,gBAAxB,EAA0CE,IAA1C,CAA+C,UAAW,CACxDJ,YAAYK,IAAZ,CAAiBrB,EAAE,IAAF,EAAQR,GAAR,EAAjB,EACA,CAFF,CAVgD,CAahDsB,UAAeE,WAbiC,CAchDM,aAAaC,OAAb,CAAqBT,MAArB,EAA6BU,IAA7B,CAAkC,SAACC,QAAD,CAAc,CAC/CC,yBAAyBhB,iBAAzB,CAA2C,CAACiB,KAAM,MAAP,CAA3C,CAD+C,CAE/CC,iBAAiBC,WAAjB,CAA6B,CAC5BC,KAAML,SAAS/B,MAAT,CAAgBqC,OADM,CAE5BC,KAAM,MAFsB,CAA7B,EAIA,CAND,EAOA,CACD,CApDC;;IAwDFC,OAAQ,iBAAW,CAClB,kBAAoB,KAAKnC,SAAL,CAClBoB,IADkB,CACb,kBADa,EAElBgB,KAFkB,QAGlBC,WAHkB,CAGN,iBAHM,CAApB,CAKA,YADKrC,SAAL,CAAeoB,IAAf,CAAoB,kBAApB,EAAwCkB,MAAxC,CAA+CC,aAA/C,CACA,CAAOA,cAAcF,WAAd,CAA0B,QAA1B,CACP,CA/DC;;IAmEFG,mBAAoB,6BAAW,gBAC9B,KAAKxC,SAAL,CAAeoB,IAAf,CAAoB,SAApB,EAA+BhB,EAA/B,CAAkC,OAAlC,CAA2C,UAAK,CAC/C,MAAK+B,MAAL,GACA,CAFD,CAD8B,CAI9B,KAAKnC,SAAL,CAAeoB,IAAf,CAAoB,WAApB,EAAiChB,EAAjC,CAAoC,OAApC,CAA6C,WAAK,CACjDF,EAAEuC,EAAEC,aAAJ,EACEC,OADF,CACU,0BADV,EAEEC,MAFF,EADiD,CAIjD,MAAKpC,QAAL,GACA,CALD,EAMA,CA7EC;;IAiFFqC,cAjFE,0BAiFe,CAChB,KAAK7C,SAAL,CAAiB,KAAKC,YAAL,EADD,CAEhB,KAAKuC,kBAAL,EAFgB,CAGhB,KAAKrC,YAAL,GACA,CArFC,CATH"}