{"version":3,"file":"Encryption.min.js","sources":["Encryption.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Password_Encryption_Js', {}, {\n\t/**\n\t * Container (Form)\n\t */\n\tcontainer: null,\n\t/**\n\t * Set container (Form)\n\t * @param {Object} element\n\t */\n\tsetContainer: function (element) {\n\t\tthis.container = element;\n\t},\n\t/**\n\t * Get Container (Form)\n\t * @returns {Object}\n\t */\n\tgetContainer: function () {\n\t\treturn this.container;\n\t},\n\t/**\n\t * Register events for change method encryption\n\t */\n\tregisterChangeMethodName: function () {\n\t\tvar container = this.getContainer();\n\t\tvar methodElement = container.find('[name=\"methods\"]');\n\t\tvar mapLengthVector = JSON.parse($('[name=\"lengthVectors\"]').val());\n\t\tmethodElement.on('change', function () {\n\t\t\tvar length = mapLengthVector[methodElement.val()];\n\t\t\tvar validator = '';\n\t\t\tvar passwordElement = container.find('[name=\"password\"]');\n\t\t\tvar passwordInfoAlert = container.find('.js-password-alert');\n\t\t\tif (typeof length === \"undefined\" || length === 0) {\n\t\t\t\tpasswordInfoAlert.addClass('d-none');\n\t\t\t\tpasswordElement.val('');\n\t\t\t\tpasswordElement.attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tpasswordInfoAlert.removeClass('d-none');\n\t\t\t\tpasswordInfoAlert.find('.js-password-length').text(length);\n\t\t\t\tpasswordElement.removeAttr('disabled');\n\t\t\t\tvalidator = 'validate[required,maxSize[' + length + '],minSize[' + length + ']]';\n\t\t\t}\n\t\t\tpasswordElement.attr('data-validation-engine', validator);\n\t\t});\n\t},\n\t/**\n\t * Register events for form\n\t */\n\tregisterForm: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = thisInstance.getContainer();\n\t\tcontainer.on('submit', function (event) {\n\t\t\tevent.preventDefault();\n\t\t\tcontainer.validationEngine(app.validationEngineOptions);\n\t\t\tif (container.validationEngine('validate')) {\n\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tAppConnector.request(container.serializeFormData()).done(function (response) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({mode: 'hide'});\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: response.result,\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Register events to preview password\n\t */\n\tregisterPreviewPassword: function () {\n\t\tvar container = this.getContainer();\n\t\tvar button = container.find('.previewPassword');\n\t\tvar passwordElement = container.find('[name=\"password\"]');\n\t\tbutton.on('mousedown', function () {\n\t\t\tpasswordElement.attr('type', 'text');\n\t\t});\n\t\tbutton.on('mouseup', function () {\n\t\t\tpasswordElement.attr('type', 'password');\n\t\t});\n\t\tbutton.on('mouseout', function () {\n\t\t\tpasswordElement.attr('type', 'password');\n\t\t});\n\t},\n\t/**\n\t * Register all events in view\n\t */\n\tregisterEvents: function () {\n\t\tthis.setContainer($('.formEncryption'));\n\t\tthis.registerForm();\n\t\tthis.registerChangeMethodName();\n\t\tthis.registerPreviewPassword();\n\t}\n});\n"],"names":["jQuery","Class","container","setContainer","element","getContainer","registerChangeMethodName","methodElement","find","mapLengthVector","JSON","parse","$","val","on","validator","passwordElement","passwordInfoAlert","addClass","attr","removeClass","text","length","removeAttr","registerForm","thisInstance","event","preventDefault","validationEngine","app","validationEngineOptions","progressIndicator","position","blockInfo","enabled","AppConnector","request","serializeFormData","done","response","progressIndicatorElement","mode","Vtiger_Helper_Js","showPnotify","result","type","registerPreviewPassword","button","registerEvents"],"mappings":"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"}